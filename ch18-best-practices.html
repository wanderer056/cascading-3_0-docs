<html lang="en">
<head>

  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="generator" content="Asciidoctor 1.5.0">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cascading 3.0 User Guide - Cascading Best Practices</title>
  <!-- TypeKit script removed due to 404 error -->
  <script type="text/javascript">try{Typekit.load();}catch(e){}</script>

      <style>
        @import url(https://cdnjs.cloudflare.com/ajax/libs/font-awesome/3.2.0/css/font-awesome.css);
/* Welcome to Compass. In this file you should write your main styles. (or centralize your imports) Import this file using the following HTML or equivalent: <link href="stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css" /> */
html, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, section, summary, time, mark, audio, video { margin: 0; border: 0; vertical-align: baseline; }

html { line-height: 1; }

/*ol, ul { list-style: none; }*/

table { border-collapse: collapse; border-spacing: 0; margin-bottom: 1.33333em;}

caption, th, td { text-align: left; font-weight: normal; vertical-align: middle; }

q, blockquote { quotes: none; }
q:before, q:after, blockquote:before, blockquote:after { content: ""; content: none; }

a img { border: none; }

article, aside, details, figcaption, figure, footer, header, hgroup, menu, nav, section, summary { display: block; }

/* ========================================================================== HTML5 display definitions ========================================================================== */
/** Correct `block` display not defined in IE 8/9. */
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary { display: block; }

/** Correct `inline-block` display not defined in IE 8/9. */
audio, canvas, video { display: inline-block; }

/** Prevent modern browsers from displaying `audio` without controls. Remove excess height in iOS 5 devices. */
audio:not([controls]) { display: none; height: 0; }

/** Address styling not present in IE 8/9. */
[hidden] { display: none; }

/* ========================================================================== Base ========================================================================== */
/*body { margin: 0; color: #444; font-size: 14px; line-height: 150%; font-family: "HelveticaNeue", "Helvetica Neue", Helvetica, Arial, sans-serif; font-weight: normal; font-style: normal; background: #f1efea url() repeat top center fixed; }*/
body {background: none !important; margin: 0; color: #4d4d4d; font: 16px/28px "proxima-nova", Arial, Helvetica, Sans-serif !important; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: none; background: #fff; min-width:1034px;}

/* ========================================================================== Links ========================================================================== */
a, a:link, a:visited, a:active { color: #4183C4; text-decoration: none; }

a:hover { color: #1F546C; text-decoration: underline; }

/** Address `outline` inconsistency between Chrome and other browsers. */
a:focus { outline: thin dotted; }

/** Improve readability when focused and also mouse hovered in all browsers. */
a:active, a:hover { outline: 0; }

/* ========================================================================== Typography ========================================================================== */
/** Address variable `h1` font-size and margin within `section` and `article` contexts in Firefox 4+, Safari 5, and Chrome. */
h1 { font-size:2em; margin: 0.67em 0 !important;}

/** Address styling not present in IE 8/9, Safari 5, and Chrome. */
abbr[title] { border-bottom: 1px dotted; }

/** Address style set to `bolder` in Firefox 4+, Safari 5, and Chrome. */
b, strong { font-weight: bold; }

/** Address styling not present in Safari 5 and Chrome. */
dfn { font-style: italic; }

/** Address styling not present in IE 8/9. */
mark { background: #ff0; color: #000; }

/** Correct font family set oddly in Safari 5 and Chrome. */
code, kbd, pre, samp, .classname, .methodname { font-family: monospace, serif; font-size: 1em; }

/** Improve readability of pre-formatted text in all browsers. */
pre { white-space: pre-wrap; }

/** Set consistent quote types. */
q { quotes: "\201C" "\201D" "\2018" "\2019"; }

/** Address inconsistent and variable font size in all browsers. */
small { font-size: 80%; }

/** Prevent `sub` and `sup` affecting `line-height` in all browsers. */
sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }

sup { top: -0.5em; }

sub { bottom: -0.25em; }

/* ========================================================================== Embedded content ========================================================================== */
/** Remove border when inside `a` element in IE 8/9. */
img { border: 0; }

/** Correct overflow displayed oddly in IE 9. */
svg:not(:root) { overflow: hidden; }

/* ========================================================================== Figures ========================================================================== */
/** Address margin not present in IE 8/9 and Safari 5. */
figure { margin: 0; }

/* ========================================================================== Forms ========================================================================== */
/** Define consistent border, margin, and padding. */
fieldset { border: 1px solid #c0c0c0; margin: 0 2px; padding: 0.35em 0.625em 0.75em; }

/** 1. Correct `color` not being inherited in IE 8/9. 2. Remove padding so people aren't caught out if they zero out fieldsets. */
legend { border: 0; /* 1 */ padding: 0; /* 2 */ }

/** 1. Correct font family not being inherited in all browsers. 2. Correct font size not being inherited in all browsers. 3. Address margins set differently in Firefox 4+, Safari 5, and Chrome. */
button, input, select, textarea { font-family: inherit; /* 1 */ font-size: 100%; /* 2 */ margin: 0; /* 3 */ }

/** Address Firefox 4+ setting `line-height` on `input` using `!important` in the UA stylesheet. */
button, input { line-height: normal; }

/** Address inconsistent `text-transform` inheritance for `button` and `select`. All other form control elements do not inherit `text-transform` values. Correct `button` style inheritance in Chrome, Safari 5+, and IE 8+. Correct `select` style inheritance in Firefox 4+ and Opera. */
button, select { text-transform: none; }

/** 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio` and `video` controls. 2. Correct inability to style clickable `input` types in iOS. 3. Improve usability and consistency of cursor style between image-type `input` and others. */
button, html input[type="button"], input[type="reset"], input[type="submit"] { -webkit-appearance: button; /* 2 */ cursor: pointer; /* 3 */ }

/** Re-set default cursor for disabled elements. */
button[disabled], html input[disabled] { cursor: default; }

/** Remove inner padding and search cancel button in Safari 5 and Chrome on OS X. */
input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration { -webkit-appearance: none; }

/** Remove inner padding and border in Firefox 4+. */
button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0; }

/** 1. Remove default vertical scrollbar in IE 8/9. 2. Improve readability and alignment in all browsers. */
textarea { overflow: auto; /* 1 */ vertical-align: top; /* 2 */ }

/* ========================================================================== Tables ========================================================================== */
/** Remove most spacing between table cells. */
table { border-collapse: collapse; border-spacing: 0; }

td, th {border:1px solid #ddd;padding:2px 10px;}

a:hover { cursor: pointer; }

a:focus { outline: none; }

img, object, embed { max-width: 100%; height: auto; }

object, embed { height: 100%; }

img { -ms-interpolation-mode: bicubic; }

#map_canvas img, #map_canvas embed, #map_canvas object, .map_canvas img, .map_canvas embed, .map_canvas object { max-width: none !important; }

.left { float: left !important; }

.right { float: right !important; }

.text-left { text-align: left !important; }

.text-right { text-align: right !important; }

.text-center { text-align: center !important; }

.text-justify { text-align: justify !important; }

.hide { display: none; }

img { display: inline-block; vertical-align: middle; }

textarea { height: auto; min-height: 50px; }

select { width: 100%; }

p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { font-size: 1.23333em; line-height: 1.6; }

.subheader, .admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .ulist > .title, .olist > .title, .dlist > .title, .qlist > .title, .tableblock > caption { line-height: 1.4; color: #777777; font-weight: 300; margin-top: 0.2em; margin-bottom: 0.5em; }

/* Typography resets */
div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td { margin: 0; direction: ltr; }

/* Default Link Styles */
a { color: #4183c4; text-decoration: none; line-height: inherit; }

a:hover, a:focus { color: #4183c4; }

a img { border: none; }

/* Default paragraph styles */
p { margin-bottom: 1em; text-rendering: optimizeLegibility; line-height:130%;}

p aside { font-size: 0.93333em; line-height: 1.35; font-style: italic; }

/* Default header styles */
h1, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { font-family: helvetica, arial, freesans, clean, sans-serif; font-weight: bold; font-style: normal; color: #333333; text-rendering: optimizeLegibility; margin-top: 0.2em; margin-bottom: 0.5em; line-height: 1.2em; }

h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small { font-size: 60%; color: gray; line-height: 0; }

h2 {color: #003977;font-weight:normal;font-size:1.6em; border-bottom:1px solid #DDD;font-weight:bold;margin-bottom:0.5em;}

h2.rule {border-top: 1px solid #CCCCCC;padding-top: 30px;}

h4 { font-size: 0.66667em; }

h5 { font-size: 1em; }

h6 { font-size: 1em; }

hr { border: solid #DDD; border-width: 1px 0 0; clear: both; margin: 1.33333em 0 1.26667em; height: 0; }

/* Helpful Typography Defaults */
em, i { font-style: italic; line-height: inherit; }

strong, b { font-weight: bold; line-height: inherit; }

small { font-size: 60%; line-height: inherit; }

code, .classname, .methodname, .code { font-family: Monaco, "DejaVu Sans Mono", "Courier New", monospace; font-weight: normal; color: #666666; word-wrap: break-word;}

/* Unordered Lists */
ul li ul, ul li ol { margin-left: 1.33333em; margin-bottom: 0; font-size: 1em; /* Override nested font-size change */ }

ul.square li ul, ul.circle li ul, ul.disc li ul { list-style: inherit; }

ul.square { list-style-type: square; }

ul.circle { list-style-type: circle; }

ul.disc { list-style-type: disc; }

ul.no-bullet { list-style: none; }

/* Ordered Lists */
ol li ul, ol li ol { margin-left: 1.33333em; margin-bottom: 0; }

/* Definition Lists */
dl { margin-bottom:1.33333em; }

dl dt { margin-bottom: 0.33333em; font-weight: bold; }

dl dd { margin-bottom: 1.33333em; }

/* Abbreviations */
abbr, acronym { text-transform: uppercase; font-size: 90%; color: #333333; border-bottom: 1px dotted #dddddd; cursor: help; }

abbr { text-transform: none; }

/* Blockquotes */
blockquote { margin: 0 0 1em; padding: 0; border-left: none; }

blockquote cite { display: block; font-size: 0.86667em; color: #666666; }

blockquote cite:before { content: "\2014 \0020"; }

blockquote cite a, blockquote cite a:visited { color: #666666; }

blockquote, blockquote p { line-height: 1.4; color: #666666; }

/* Microformats */
.vcard { display: inline-block; margin: 0 0 1.33333em 0; border: 1px solid #dddddd; padding: 0.66667em 0.8em; }

.vcard li { margin: 0; display: block; }

.vcard .fn { font-weight: bold; font-size: 1em; }

.vevent .summary { font-weight: bold; }

.vevent abbr { cursor: auto; text-decoration: none; font-weight: bold; border: none; padding: 0 0.06667em; }

@media only screen and (min-width: 768px) { h1, h2, h3,.sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; }
  h3, .sidebarblock > .content > .title { font-size: 1.2em; }
  h4 { font-size: 1em; } }
/* Print styles.  Inlined to avoid required HTTP connection: www.phpied.com/delay-loading-your-print-css/ Credit to Paul Irish and HTML5 Boilerplate (html5boilerplate.com)
*/
.print-only { display: none !important; }

@media print { * { background: transparent !important; color: #000 !important; /* Black prints faster: h5bp.com/s */ box-shadow: none !important; text-shadow: none !important; }
  a, a:visited { text-decoration: underline; }
  a[href]:after { content: " (" attr(href) ")"; }
  abbr[title]:after { content: " (" attr(title) ")"; }
  .ir a:after, a[href^="javascript:"]:after, a[href^="#"]:after { content: ""; }
  pre, blockquote { border-left: 1px solid #999; page-break-inside: avoid; }
  thead { display: table-header-group; /* h5bp.com/t */ }
  tr, img { page-break-inside: avoid; }
  img { max-width: 100% !important; }
  @page { margin: 0.5cm; }
  p, h2, h3, #toctitle, .sidebarblock > .content > .title { orphans: 3; widows: 3; }
  h2, h3, #toctitle, .sidebarblock > .content > .title { page-break-after: avoid; }
  .hide-on-print { display: none !important; }
  .print-only { display: block !important; }
  .hide-for-print { display: none !important; }
  .show-for-print { display: inherit !important; } }
/* Tables */

code , .code{ font-size: 0.86667em; padding: 0 5px 2px 5px; white-space: nowrap; background-color: transparent; border: 1px solid #dddddd; -webkit-border-radius: 3px; border-radius: 3px; text-shadow: none; }

kbd.keyseq { color: #666666; }

kbd:not(.keyseq) { display: inline-block; color: #333333; font-size: 0.8em; line-height: 1.4; background-color: #F7F7F7; border: 1px solid #ccc; -webkit-border-radius: 3px; border-radius: 3px; -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset; box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset; margin: -0.15em 0.15em 0 0.15em; padding: 0.2em 0.6em 0.2em 0.5em; vertical-align: middle; white-space: nowrap; }

kbd kbd:first-child { margin-left: 0; }

kbd kbd:last-child { margin-right: 0; }

.menuseq, .menu { color: #1a1a1a; }

#header, #footnotes, #footer { width: 100%; margin-left: auto; margin-right: auto; margin-top: 0; margin-bottom: 0; /* max-width: 66.66667em */ *zoom: 1; position: relative; padding-left: 1em; padding-right: 1em; }

#content, #footer { margin:0 100px 0 350px; max-width: 960px; }

#header { margin-bottom: 2.66667em;}

#header > h1 { margin: 0 auto; margin-left: 350px; padding-top: 15px; padding-bottom: 20px; width: 960px; color: #FFF;}

#header span { color: #666666; }

#header #revnumber { margin: 0 auto; margin-left: 350px; width: 960px; display: block; color: #FFF; }

#header br { display: none; }

#header br + span { padding-left: 3px; }

#header br + span:before { content: "\2013 \0020"; }

#header br + span.author { padding-left: 0; }

#header br + span.author:before { content: ", "; }

#toc { border-bottom: 0 solid #dddddd; padding-bottom: 1.33333em; }

#toc > ul, #toc > ol { margin-left: 0.26667em; }

#toc ul.sectlevel0 > li > a, #toc ol.sectlevel0 > li > a { font-style: italic; }

#toc ul.sectlevel0 ul.sectlevel1, #toc ol.sectlevel0 ol.sectlevel1 { margin-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }

#toc ul, #toc ol { list-style-type: none; }

.sectlevel1 li {line-height:120%;padding:4px 0;}

#toctitle { color: #777777; }

ol.sectlevel1 {padding:0;}

.toc { margin-top: 40px; margin-left: 30px; }
#toc.toc2 { position: absolute; overflow: auto; left: 0; top: 155px; padding: 1em; width: 18em; border: 1px solid #DDD; z-index: 1000; }
#toc.toc2 #toctitle { margin-top: 0; }
#toc.toc2 ul ul, #toc.toc2 ol ol { margin-left: 0; padding-left: 1.33333em; }
#toc.toc2 ul.sectlevel0 ul.sectlevel1, #toc.toc2 ol.sectlevel0 ol.sectlevel1 { padding-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
body.toc2.toc-right { padding-left: 0; padding-right: 20em; }
body.toc2.toc-right #toc.toc2 { border-right: 0; border-left: 1px solid #dddddd; left: auto; right: 0; } 
.footer { max-width: 100%; background-color: #000; padding: 1.33333em; }

.footer-text { color: #888888; line-height: 1.26; max-width: 960px;margin: 0 auto; text-align: center;}

.sect1 { padding-bottom: 1.33333em; }

.sect1 + .sect1 { border-top: 0 solid #dddddd; }

#content h1 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor { position: absolute; width: 1em; margin-left: -1em; display: block; text-decoration: none; visibility: hidden; text-align: center; font-weight: normal; }

#content h1 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before { content: '\00A7'; font-size: .85em; vertical-align: text-top; display: block; margin-top: 0.05em; }

#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover { visibility: visible; }

#content h1 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link { color: #333333; text-decoration: none; }

#content h1 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover { color: #262626; }

.admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .ulist > .title, .olist > .title, .dlist > .title, .qlist > .title { text-align: left; font-weight: bold; }

.tableblock > caption { text-align: left; font-weight: bold; white-space: nowrap; overflow: visible; max-width: 0; }

table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p { font-size: inherit; }

.admonitionblock > table { border: 0; background: none; width: 100%;}

.admonitionblock > table td.icon { text-align: center; width: 80px; }

.admonitionblock > table td.icon img { max-width: none; }

.admonitionblock > table td.icon .title { font-weight: bold; text-transform: uppercase; }

.admonitionblock > table td.content { padding-left: 1.2em; padding-right: 1.33333em; border-left: 1px solid #dddddd; color: #666666; }

.admonitionblock > table td.content > .paragraph:last-child > p { margin-bottom: 0; }

.exampleblock > .content { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.33333em; padding: 1.33333em; background: white; -webkit-border-radius: 3px; border-radius: 3px; }

.exampleblock > .content > :first-child { margin-top: 0; }

.exampleblock > .content > :last-child { margin-bottom: 0; }

.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6, .exampleblock > .content p { color: #333333; }

.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6 { line-height: 1; margin-bottom: 0.66667em; }

.exampleblock > .content h1.subheader, .exampleblock > .content h2.subheader, .exampleblock > .content h3.subheader, .exampleblock > .content .subheader#toctitle, .sidebarblock.exampleblock > .content > .subheader.title, .exampleblock > .content h4.subheader, .exampleblock > .content h5.subheader, .exampleblock > .content h6.subheader { line-height: 1.4; }

.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child { margin-bottom: 0; }

.exampleblock.result > .content { -webkit-box-shadow: 0 1px 8px #eaeaea; box-shadow: 0 1px 8px #eaeaea; }

.sidebarblock { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.33333em; padding: 1.33333em; background: white; -webkit-border-radius: 3px; border-radius: 3px; }

.sidebarblock > :first-child { margin-top: 0; }

.sidebarblock > :last-child { margin-bottom: 0; }

.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6, .sidebarblock p { color: #333333; }

.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6 { line-height: 1; margin-bottom: 0.66667em; }

.sidebarblock h1.subheader, .sidebarblock h2.subheader, .sidebarblock h3.subheader, .sidebarblock .subheader#toctitle, .sidebarblock > .content > .subheader.title, .sidebarblock h4.subheader, .sidebarblock h5.subheader, .sidebarblock h6.subheader { line-height: 1.4; }

.sidebarblock > .content > .title { color: #777777; margin-top: 0; line-height: 1.4; border-width: 0 0 1px 0; border-style: solid; border-color: #cacaca; }

.sidebarblock > .content > .paragraph:last-child p { margin-bottom: 0; }

.verseblock { margin-bottom: 1.33333em; }

.literalblock, .listingblock { margin-bottom: 1.33333em; }

.literalblock > .content > pre, .listingblock > .content > pre { background-color: #F8F8F8; color:#4d4d4d; margin: 15px 0; padding: 10px 5px; border-left: 1px solid #298cc3; font: 12px/24px Consolas,"Andale Mono WT","Andale Mono","Lucida Console","Lucida Sans Typewriter","DejaVu Sans Mono","Bitstream Vera Sans Mono","Liberation Mono","Nimbus Mono L",Monaco,"Courier New",Courier,monospace; word-wrap: break-word; line-height: 1.6; }

.literalblock > .content > pre.nowrap, .listingblock > .content > pre.nowrap { overflow-x: auto; white-space: pre; word-wrap: normal; }

.literalblock > .content > pre > code, .listingblock > .content > pre > code { white-space: inherit; color:#4d4d4d; font: 12px/24px Consolas,"Andale Mono WT","Andale Mono","Lucida Console","Lucida Sans Typewriter","DejaVu Sans Mono","Bitstream Vera Sans Mono","Liberation Mono","Nimbus Mono L",Monaco,"Courier New",Courier,monospace; padding: 0; background: none; font-weight: normal; border: none; }

@media only screen { .literalblock > .content > pre, .listingblock > .content > pre { font-size: 0.69333em; } }
@media only screen and (min-width: 768px) { .literalblock > .content > pre, .listingblock > .content > pre { font-size: 0.78em; } }
@media only screen and (min-width: 1280px) { .literalblock > .content > pre, .listingblock > .content > pre { font-size: 0.86667em; } }
.listingblock:hover .xml:before { content: "xml"; text-transform: uppercase; float: right; font-size: 0.9em; color: #999; }

.listingblock:hover .html:before { content: "html"; text-transform: uppercase; float: right; font-size: 0.9em; color: #999; }

.listingblock:hover .ruby:before { content: "ruby"; text-transform: uppercase; float: right; font-size: 0.9em; color: #999; }

.listingblock:hover .asciidoc:before { content: "asciidoc"; text-transform: uppercase; float: right; font-size: 0.9em; color: #999; }

.listingblock:hover .java:before { content: "java"; text-transform: uppercase; float: right; font-size: 0.9em; color: #999; }

.listingblock:hover .javascript:before { content: "javascript"; text-transform: uppercase; float: right; font-size: 0.9em; color: #999; }

.listingblock:hover .css:before { content: "css"; text-transform: uppercase; float: right; font-size: 0.9em; color: #999; }

.listingblock:hover .scss:before { content: "scss"; text-transform: uppercase; float: right; font-size: 0.9em; color: #999; }

.quoteblock { margin: 0 0 1em; padding: 0; border-left: none; }

.quoteblock blockquote { margin: 0 0 1em 0; padding: 0 0 0.6em 0; border: 0; }

.quoteblock blockquote > .paragraph:last-child p { margin-bottom: 0; }

.quoteblock .attribution { margin-top: -.25em; padding-bottom: 0.6em; font-size: 0.86667em; color: #666666; }

.quoteblock .attribution br { display: none; }

.quoteblock .attribution cite { display: block; margin-bottom: 0.66667em; }

table thead th, table tfoot th { font-weight: bold; }

table.tableblock.grid-all { border-collapse: collapse; border-spacing: 1px; -webkit-border-radius: 3px; border-radius: 3px; border-top: 1px solid #dddddd; }

table.tableblock.frame-topbot, table.tableblock.frame-none { border-left: 0; border-right: 0; }

table.tableblock.frame-sides, table.tableblock.frame-none { border-top: 0; border-bottom: 0; }

table.tableblock td .paragraph:last-child p, table.tableblock td > p:last-child { margin-bottom: 0; }

th.tableblock.halign-left, td.tableblock.halign-left { text-align: left; }

th.tableblock.halign-right, td.tableblock.halign-right { text-align: right; }

th.tableblock.halign-center, td.tableblock.halign-center { text-align: center; }

th.tableblock.halign-top, td.tableblock.halign-top { vertical-align: top; }

th.tableblock.halign-bottom, td.tableblock.halign-bottom { vertical-align: bottom; }

th.tableblock.halign-middle, td.tableblock.halign-middle { vertical-align: middle; }

p.tableblock.header { color: #222222; font-weight: bold; }

td > div.verse { white-space: pre; }

ol { margin-left: 0.96667em; }

ul li ol { margin-left: 0.7em; }

dl dd { margin-left: 1.125em; }

dl dd:last-child, dl dd:last-child > :last-child { margin-bottom: 0; }

.unstyled dl dt { font-weight: normal; font-style: normal; }

ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .olist, .olist .ulist { margin-bottom: 0.5em; }

ul.unstyled, ol.unnumbered, ul.checklist { list-style-type: none; margin-left: 0.66667em; }

ol.arabic { list-style-type: decimal; }

ol.decimal { list-style-type: decimal-leading-zero; }

ol.loweralpha { list-style-type: lower-alpha; }

ol.upperalpha { list-style-type: upper-alpha; }

ol.lowerroman { list-style-type: lower-roman; }

ol.upperroman { list-style-type: upper-roman; }

ol.lowergreek { list-style-type: lower-greek; }

.hdlist > table, .colist > table { border: 0; background: none; }

.hdlist > table > tbody > tr, .colist > table > tbody > tr { background: none; }

.literalblock + .colist, .listingblock + .colist { margin-top: -0.5em; }

.colist > table tr > td:first-of-type { padding: 0 .8em; line-height: 1; }

.colist > table tr > td:last-of-type { padding: 0.26667em 0; }

td.hdlist1 { vertical-align: top; padding-right: .8em; font-weight: bold; }

.qanda > ol > li > p:first-child { color: #3876b4; }

.thumb, .th { line-height: 0; display: inline-block; border: solid 4px white; -webkit-box-shadow: 0 0 0 1px #dddddd; box-shadow: 0 0 0 1px #dddddd; }

.imageblock { margin-bottom: 1.33333em; }

.imageblock.left, .imageblock[style*="float: left"] { margin: 0.26667em 0.66667em 1.33333em 0; }

.imageblock.right, .imageblock[style*="float: right"] { margin: 0.26667em 0 1.33333em 0.66667em; }

.imageblock > .title { margin-bottom: 0; }

.imageblock.thumb, .imageblock.th { border-width: 6px; }

.imageblock.thumb > .title, .imageblock.th > .title { padding: 0 0.13333em; }

.image.left, .image.right { margin-top: 0.26667em; margin-bottom: 0.26667em; display: inline-block; line-height: 0; }

.image.left { margin-right: 0.66667em; }

.image.right { margin-left: 0.66667em; }

span.footnote, span.footnoteref { vertical-align: super; font-size: 0.93333em; }

span.footnote a, span.footnoteref a { text-decoration: none; }

#footnotes { padding: 0.8em 0.4em; margin-bottom: 1em; }

#footnotes hr { width: 20%; min-width: 6.66667em; margin: -.25em 0 .75em 0; border-width: 1px 0 0 0; }

#footnotes .footnote { line-height: 1.3; font-size: 0.93333em; margin-left: 1.2em; text-indent: -1.2em; margin-bottom: .2em; }

#footnotes .footnote a:first-of-type { font-weight: bold; text-decoration: none; }

#footnotes .footnote:last-of-type { margin-bottom: 0; }

#content #footnotes { margin-top: -0.66667em; }

.gist .file-data > table { border: none; background: #fff; width: 100%; margin-bottom: 0; }

.gist .file-data > table td.line-data { width: 99%; }

.admonitionblock td.icon [class^="icon-"]:before { font-size: 2.5em; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); cursor: default; }

.admonitionblock td.icon .icon-note:before { content: "\f05a"; color: #4183c4; color: #2e6295; }

.admonitionblock td.icon .icon-tip:before { content: "\f0eb"; text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8); color: #111; }

.admonitionblock td.icon .icon-warning:before { content: "\f071"; color: #bf6900; }

.admonitionblock td.icon .icon-caution:before { content: "\f06d"; color: #bf3400; }

.admonitionblock td.icon .icon-important:before { content: "\f06a"; color: #bf0000; }

.conum { display: inline-block; color: white !important; background-color: #333333; -webkit-border-radius: 100px; border-radius: 100px; text-align: center; width: 20px; height: 20px; font-size: 12px; font-weight: bold; line-height: 20px; font-family: Arial, sans-serif; font-style: normal; position: relative; top: -2px; letter-spacing: -1px; }

.conum * { color: white !important; }

.conum + b { display: none; }

.conum:after { content: attr(data-value); }

.conum:not([data-value]):empty { display: none; }

p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { font-size: 1em; color: #666666; }

/*h2 { color: #325D72; border-bottom: 1px solid #dddddd; }*/

#content { margin-top: 15px; }

#content h1 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor { color: #333333; }

#header, #content, #footnotes { /*max-width: 660px;*/ padding-left: 0; padding-right: 0; }

#content ul li { padding-left: .7em; }

.olist.procedure > ol { counter-reset: li; list-style: none; position: relative; }

.olist.procedure > ol > li { position: relative; padding: 5px 0 5px 55px; margin-bottom: 5px; }

.olist.procedure > ol > li:before { content: counter(li); counter-increment: li; position: absolute; top: 0; left: 0; height: 100%; width: 30px; padding: 0 10px 0 0; color: #999; font-size: 1.46667em; font-weight: bold; line-height: 1.6; text-align: right; border-right: 1px solid #ddd; }

.quoteblock blockquote { padding-left: 1em; }

.sidebarblock > .content > .title { margin-top: -20px; margin-right: -20px; margin-left: -20px; margin-bottom: 20px; padding: 1em; font-size: 0.8em; background: #eaeaea; }

#header { margin-bottom: 0; padding-top: 5px; min-height: 91px; border-top: 1px solid #000; background: #000; }

/* Code for container left justified */

.container { margin:0 100px 0 40px; padding: 0; max-width:1230px;}

.container:after { content: "\0020"; display: block; height: 0; clear: both; visibility: hidden; }

.columns { float: left; display: inline; margin-left: 10px; margin-right: 10px; }

.branding {background-image: url(); width:256px; height:46px; background-repeat:no-repeat;float: left; cursor: pointer; margin:24.120px 0;}

.header-top {float: right; position: relative; left: 15px;}

.menu-top-header-container { float:left; }

#menu-top-header { margin: 0; }

.header-top li {float:left; display:inline; padding: 0 0 0 10px; }

.header-top li a { color: #298cc3 !important; text-transform: uppercase; }

#menu-item-516 {background: none repeat scroll 0 0 #ED1C24; border-radius: 2px; color: #FFFFFF; display: inline-block;font-size: 10px; font-weight: 600; height: 21px; line-height: 21px; min-width: 85px; text-align: center; margin-left:10px; margin-top:3px; padding:0px 5px 0px 5px;
}
#menu-item-516 a { color:#fff !important; }

#nav { float: right; margin: 20px 0 0 0; text-align: right; text-transform: uppercase; font-size: 17px ; line-height: 19px ; font-weight: 600; min-width:660px; }

#nav ul { margin: 0; padding: 0; list-style: none; }
#nav > .menu-home-container > ul > li { display: inline-block; vertical-align: top; margin: 0 0 0 4%; position: relative; }
#nav ul li a { color: #fff; }
#nav ul li a:hover { color: #999; text-decoration: none; }
#nav .current_page_item a,
#nav .current-page-ancestor a,
#nav .current-menu-item a,
#nav .current-menu-ancestor a { color: #298cc3;  }
#nav > .menu-home-container > ul > li ul { display: none; position: absolute;  }
#nav > .menu-home-container > ul > li:hover ul { display: block; }
#nav ul.sub-menu {    background-color: #ccc; border-radius: 0 0 5px 5px; box-shadow: 0 1px 1px rgba(0, 0, 0, 0.2); text-align: left; min-width:200px; white-space: normal; display:block; padding-top: 10px; margin-top:2px; z-index:99; }
#nav ul ul.sub-menu li { display: block; }
#nav ul ul.sub-menu li { border: medium none; }
#nav ul ul.sub-menu li a { }
#nav ul ul.sub-menu li a { color: #003977; font-size: 12px; line-height:14px; margin-bottom: 5px; float: none; display: block; line-height: 16px; padding: 2px 0 2px 8px; position: relative; white-space: normal; width: 210px; }
#nav ul ul.sub-menu li a:hover { color:#fff; }

.header-google{float: left; height: 20px!important; width: 190px; margin-left:10px;position:relative; top:4px; left: 2px;}

input.gsc-input { width: 116px !important; height: 12px !important; font-size:12px !important; border: 1px solid #BBB; padding: 3px 6px; float: left;}

input.gsc-search-button { background: url(') no-repeat !important; text-indent: -9999em; border: none !important; width: 40px; margin-left: 4px; border-color: #000000; float: left; }

a, a:link, a:visited, a:active { color: #298EC5; text-decoration:none; }

a:hover { color: #0060B8; text-decoration:underline; }

.note { margin-bottom: 20px; }
      </style>
      <link rel="stylesheet" href="">
    <link rel="stylesheet" href="">
    <script src=""></script>
    <script>if (typeof hljs !== 'undefined') { hljs.initHighlightingOnLoad(); }</script>

  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-188528-5']);
    _gaq.push(['_setDomainName', 'cascading.org']);
    _gaq.push(['_trackPageview']);

    (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https:' : 'http:') + '//google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>

  <script src="js/common-header.js"></script>
  <script src="js/common-footer.js"></script>
</head>
<body class="book toc2">

        <div id="toc" class="toc2">
          <div id="toctitle">Table of Contents</div>
          <ul class="sectlevel1">
<li><a href="ch18-best-practices.html#_cascading_best_practices">Cascading Best Practices</a>
<ul class="sectlevel2">
<li><a href="ch18-best-practices.html#_unit_testing">Unit Testing</a></li>
<li><a href="ch18-best-practices.html#_flow_granularity">Flow Granularity</a></li>
<li><a href="ch18-best-practices.html#_subassemblies_not_factories">SubAssemblies, not Factories</a></li>
<li><a href="ch18-best-practices.html#_logical_responsibilities_for_subassemblies">Logical Responsibilities for SubAssemblies</a></li>
<li><a href="ch18-best-practices.html#_java_operators_in_field_names">Java Operators in Field Names</a></li>
<li><a href="ch18-best-practices.html#debugging-planner">Debugging Planner Failures</a></li>
<li><a href="ch18-best-practices.html#_optimizing_joins">Optimizing Joins</a></li>
<li><a href="ch18-best-practices.html#_debugging_streams">Debugging Streams</a></li>
<li><a href="ch18-best-practices.html#handling-bad-data">Handling Good and Bad Data</a></li>
<li><a href="ch18-best-practices.html#_maintaining_state_in_operations">Maintaining State in Operations</a></li>
<li><a href="ch18-best-practices.html#_fields_constants">Fields Constants</a></li>
<li><a href="ch18-best-practices.html#_checking_the_source_code">Checking the Source Code</a></li>
</ul>
</li>
</ul>
        </div>
</div>
<div id="content">
  <h1>Cascading 3.0 User Guide - Cascading Best Practices</h1>
  <div class="sect1">
<h2 id="_cascading_best_practices"><a class="anchor" href="ch18-best-practices.html#_cascading_best_practices"></a>Cascading Best Practices</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_unit_testing"><a class="anchor" href="ch18-best-practices.html#_unit_testing"></a>Unit Testing</h3>
<div class="paragraph">
<p>Discrete testing of each Operation, pipe assembly, and application is a must.</p>
</div>
<div class="paragraph">
<p>The <span class="classname">cascading.CascadingTestCase</span> provides a number of static helper
methods.</p>
</div>
<div class="paragraph">
<p>When testing custom Operations, use the <span class="methodname">invokeFunction()</span>,
<span class="methodname">invokeFilter()</span>, <span class="methodname">invokeAggregator()</span>, and
<span class="methodname">invokeBuffer()</span> methods.</p>
</div>
<div class="paragraph">
<p>When testing Flows, use the <span class="methodname">validateLength()</span> methods. There are
quite a few of them, and collectively they offer great flexibility. All of them
read the sink tap, validate that it is the correct length and has the correct
<span class="classname">Tuple</span> size, and check to see whether the values match a given
regular expression pattern.</p>
</div>
<div class="paragraph">
<p>It is also possible to write tests that are independent of the underlying
platform. Any unit test should subclass <span class="classname">cascading.PlatformTestCase</span>
located in the <span class="code">cascading-platform-x.y.z-tests.jar</span> file.</p>
</div>
<div class="paragraph">
<p>Any platform to be tested against should be added to the <span class="code">CLASSPATH</span> as
well. <span class="classname">PlatformTestCase</span> searches the <span class="code">CLASSPATH</span> for all
available platforms and runs each test on the subclass against each platform
found.</p>
</div>
<div class="paragraph">
<p>See the Cascading platform unit tests for examples, all of which adhere to the
naming convention of <span class="code">*PlatformTest.java</span>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For Maven users, be sure to add the <span class="code">tests</span> classifier to any
dependencies. Note that the <span class="code">cascading-platform</span> project has no main code,
but does have only tests, so it must be retrieved via the <span class="code">tests</span>
classifier.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_flow_granularity"><a class="anchor" href="ch18-best-practices.html#_flow_granularity"></a>Flow Granularity</h3>
<div class="paragraph">
<p>Although using one large <span class="classname">Flow</span> may result in slightly more efficient
performance, it&#8217;s advisable to use a more modular and flexible approach. Such an
approach involves creating medium-sized Flows with well-defined responsibilities
and passing all the resulting interdependent Flows to a <span class="classname">Cascade</span> to
sequence and execute as a single unit.</p>
</div>
<div class="paragraph">
<p>Similarly, using the <span class="classname">TextDelimited</span> <span class="classname">Scheme</span> (or any
custom format designed for long-term archival) between <span class="classname">Flow</span>
instances allows you to hand off intermediate data to other systems for
reporting or QA purposes, incurring a minimal performance penalty while
remaining compatible with other tools.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Visit <a href="" class="bare">http://cascading.org/extensions/</a> for a list of available file formats
suitable for data archival or debugging.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_subassemblies_not_factories"><a class="anchor" href="ch18-best-practices.html#_subassemblies_not_factories"></a>SubAssemblies, not Factories</h3>
<div class="paragraph">
<p>When developing your applications, use <span class="classname">SubAssembly</span> subclasses, not
"factory" methods. The resulting code is much easier to read and test.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <span class="classname">Object</span> constructors are "factories", so there isn&#8217;t much
reason to build frameworks to duplicate what a constructor already does. Of
course, there are exceptional cases in which you don&#8217;t have the option to use a
<span class="classname">SubAssembly</span>, but in practice they are rare.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_logical_responsibilities_for_subassemblies"><a class="anchor" href="ch18-best-practices.html#_logical_responsibilities_for_subassemblies"></a>Logical Responsibilities for SubAssemblies</h3>
<div class="paragraph">
<p>SubAssemblies provide a very convenient means to co-locate similar or related
responsibilities into a single place. For example, it&#8217;s simple to use a
<span class="classname">ParsingSubAssembly</span> and a <span class="classname">RulesSubAssembly</span>, where the
first is responsible solely for parsing incoming <span class="classname">Tuple</span> streams (log
files for example), and the second applies rules to decide whether a given
<span class="classname">Tuple</span> should be discarded or marked as bad.</p>
</div>
<div class="paragraph">
<p>Additionally, in your unit tests you can create a
<span class="classname">TestAssertionsSubAssembly</span> that simply inlines various
<span class="classname">ValueAssertions</span> and <span class="classname">GroupAssertions</span>. The practice of
inlining assertions directly in your SubAssemblies is also important, but
sometimes it makes sense to have more tests outside of the business logic.</p>
</div>
</div>
<div class="sect2">
<h3 id="_java_operators_in_field_names"><a class="anchor" href="ch18-best-practices.html#_java_operators_in_field_names"></a>Java Operators in Field Names</h3>
<div class="paragraph">
<p>There are a few Operations in Cascading (e.g., <span class="classname">ExpressionFunction</span>
and <span class="classname">ExpressionFilter</span>) that compile and apply Java expressions as
needed during processing. In these expressions, Operation argument field names
are used as variable names in the expression.</p>
</div>
<div class="paragraph">
<p>For this reason, be sure to create field names without characters that cause
compilation errors if they are used in an expression. For example, "first-name"
is a valid field name for use with Cascading, but might result in the expression
<span class="code">first-name.trim()</span>, which would cause a compilation error.</p>
</div>
</div>
<div class="sect2">
<h3 id="debugging-planner"><a class="anchor" href="ch18-best-practices.html#debugging-planner"></a>Debugging Planner Failures</h3>
<div class="paragraph">
<p>The <span class="classname">FlowConnector</span> sometimes fails when attempting to plan a
<span class="classname">Flow</span>. If the error message given by <span class="classname">PlannerException</span>
is vague, use the <span class="code">PlannerException.writeDOT()</span> method to export a
representation of the internal pipe assembly.</p>
</div>
<div class="paragraph">
<p>DOT files can be opened with Graphviz or OmniGraffle. The plans in these files
are only partial, but the graphic renderings show you where the Cascading
planner failed.</p>
</div>
<div class="paragraph">
<p>Note that you can also create a DOT file from a <span class="classname">Flow</span> by using
<span class="code">Flow.writeDOT()</span> to better understand how the planner has modified your
business logic.</p>
</div>
<div class="paragraph">
<p>If the above methods do not provide insight, the new Cascading 3.0 planner has a
much improved debugging framework.</p>
</div>
<div class="paragraph">
<p>When running tests, set the following:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>-Dtest.traceplan.enabled=true</pre>
</div>
</div>
<div class="paragraph">
<p>If you are on Mac OS X and have installed Graphviz, DOT files can be converted
to PDF automatically. To enable this feature, set:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>-Dutil.dot.to.pdf.enabled=true</pre>
</div>
</div>
<div class="paragraph">
<p>Optionally, for stand-alone applications, statistics and tracing can be enabled
selectively when the following properties are passed to the
<span class="classname">FlowConnector</span>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>cascading.planner.stats.path</code> - outputs detailed statistics about execution
time of the planner</p>
</li>
<li>
<p><code>cascading.planner.plan.path</code> - basic planner information</p>
</li>
<li>
<p><code>cascading.planner.plan.transforms.path</code> - detailed information about each
rule</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_optimizing_joins"><a class="anchor" href="ch18-best-practices.html#_optimizing_joins"></a>Optimizing Joins</h3>
<div class="paragraph">
<p>When joining two streams via a <span class="classname">CoGroup</span> pipe, try to put the larger
stream in the leftmost argument to the <span class="classname">CoGroup</span>.</p>
</div>
<div class="paragraph">
<p>The reason for this is that joining multiple streams requires some accumulation
of values before the join operator can begin, but the leftmost stream is not
accumulated. Consequently, this technique should improve the performance of most
joins.</p>
</div>
</div>
<div class="sect2">
<h3 id="_debugging_streams"><a class="anchor" href="ch18-best-practices.html#_debugging_streams"></a>Debugging Streams</h3>
<div class="paragraph">
<p>When creating complex assemblies, it&#8217;s safe to embed
<a href="ch16-operations.html#debug-function"><span class="classname">Debug</span></a> Operations at
appropriate debug levels as needed. To avoid wasting resources, use the planner
to remove the <span class="classname">Debug</span>&gt;&gt; Operations at runtime for production and
staging runs.</p>
</div>
</div>
<div class="sect2">
<h3 id="handling-bad-data"><a class="anchor" href="ch18-best-practices.html#handling-bad-data"></a>Handling Good and Bad Data</h3>
<div class="paragraph">
<p>Corrupt data often enters raw data streams. For instance, bad content may be
fetched from the web via a crawler upstream, or a bug may have leaked into a
browser widget that sends user behavior information back for analysis. Whatever
the cause, it&#8217;s a good practice to define a set of rules for identifying and
managing questionable records.</p>
</div>
<div class="paragraph">
<p>It is tempting to simply throw an exception and have a Trap capture the
offending <span class="classname">Tuple</span>. However, Traps were not designed as a filtering
mechanism, and consequently much valuable information is lost when Traps are
used in this situation.</p>
</div>
<div class="paragraph">
<p>Instead of Traps, use Filters. Create a <span class="classname">SubAssembly</span> that applies
rules to the stream by setting a binary field that marks the <span class="classname">Tuple</span>
as good or bad. After all the rules are applied, split the stream based on the
value of the good or bad <span class="classname">Boolean</span> value. Consider setting a reason
field that states why the <span class="classname">Tuple</span> was marked bad.</p>
</div>
</div>
<div class="sect2">
<h3 id="_maintaining_state_in_operations"><a class="anchor" href="ch18-best-practices.html#_maintaining_state_in_operations"></a>Maintaining State in Operations</h3>
<div class="paragraph">
<p>When creating custom Operations (<span class="classname">Function</span>, <span class="classname">Filter</span>,
<span class="classname">Aggregator</span>, or <span class="classname">Buffer</span>), do not store the Operation
state in class fields.</p>
</div>
<div class="paragraph">
<p>For example, if implementing an <span class="classname">Aggregator</span> as a custom "counter,"
do not create a field named "count" and increment it on every
<span class="methodname">Aggregator.aggregate()</span> call.</p>
</div>
<div class="paragraph">
<p>There is no guarantee that your Operation will be called from a single thread in
a JVM. Also, future versions of Hadoop or Cascading local mode might execute the
same Operation from multiple threads.</p>
</div>
</div>
<div class="sect2">
<h3 id="_fields_constants"><a class="anchor" href="ch18-best-practices.html#_fields_constants"></a>Fields Constants</h3>
<div class="paragraph">
<p>Instead of interspersing String field names throughout the code, create an
interface that holds a constant value for each field name:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java" data-lang="java">public static Fields FIRST_NAME = new Fields( "firstname", String.class );
public static Fields LAST_NAME = new Fields( "lastname", String.class );</code></pre>
</div>
</div>
<div class="paragraph">
<p>Using the Fields class, instead of String, allows for building more complex
constants:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java" data-lang="java">public static Fields FULL_NAME = FIRST_NAME.append( LAST_NAME );</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Always declare the canonical type for each field. When building more
complex Fields instances from predefined constant Fields, the type information
is retained.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_checking_the_source_code"><a class="anchor" href="ch18-best-practices.html#_checking_the_source_code"></a>Checking the Source Code</h3>
<div class="paragraph">
<p>When in doubt, look at the Cascading source code. If something is not documented
in this <em>User Guide</em> or Javadoc and it&#8217;s a feature of Cascading, the feature
source code or <strong>unit tests</strong> will give you clear instructions on what to do or
expect.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Maven users should configure their builds to pull <span class="code">*-sources.jar</span> and
<span class="code">*-javadoc.jar</span> files so that the IDE can allow seamless navigation
between developer and Cascading source.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>

</body>
</html>