<html lang="en">
<head>

  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="generator" content="Asciidoctor 1.5.0">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cascading 3.0 User Guide - Using and Developing Operations</title>
  <script type="text/javascript" src="https://use.typekit.net/dob3ybp.js"></script>
  <script type="text/javascript">try{Typekit.load();}catch(e){}</script>

      <style>
        @import url(https://cdnjs.cloudflare.com/ajax/libs/font-awesome/3.2.0/css/font-awesome.css);
/* Welcome to Compass. In this file you should write your main styles. (or centralize your imports) Import this file using the following HTML or equivalent: <link href="stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css" /> */
html, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, section, summary, time, mark, audio, video { margin: 0; border: 0; vertical-align: baseline; }

html { line-height: 1; }

/*ol, ul { list-style: none; }*/

table { border-collapse: collapse; border-spacing: 0; margin-bottom: 1.33333em;}

caption, th, td { text-align: left; font-weight: normal; vertical-align: middle; }

q, blockquote { quotes: none; }
q:before, q:after, blockquote:before, blockquote:after { content: ""; content: none; }

a img { border: none; }

article, aside, details, figcaption, figure, footer, header, hgroup, menu, nav, section, summary { display: block; }

/* ========================================================================== HTML5 display definitions ========================================================================== */
/** Correct `block` display not defined in IE 8/9. */
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary { display: block; }

/** Correct `inline-block` display not defined in IE 8/9. */
audio, canvas, video { display: inline-block; }

/** Prevent modern browsers from displaying `audio` without controls. Remove excess height in iOS 5 devices. */
audio:not([controls]) { display: none; height: 0; }

/** Address styling not present in IE 8/9. */
[hidden] { display: none; }

/* ========================================================================== Base ========================================================================== */
/*body { margin: 0; color: #444; font-size: 14px; line-height: 150%; font-family: "HelveticaNeue", "Helvetica Neue", Helvetica, Arial, sans-serif; font-weight: normal; font-style: normal; background: #f1efea url() repeat top center fixed; }*/
body {background: none !important; margin: 0; color: #4d4d4d; font: 16px/28px "proxima-nova", Arial, Helvetica, Sans-serif !important; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: none; background: #fff; min-width:1034px;}

/* ========================================================================== Links ========================================================================== */
a, a:link, a:visited, a:active { color: #4183C4; text-decoration: none; }

a:hover { color: #1F546C; text-decoration: underline; }

/** Address `outline` inconsistency between Chrome and other browsers. */
a:focus { outline: thin dotted; }

/** Improve readability when focused and also mouse hovered in all browsers. */
a:active, a:hover { outline: 0; }

/* ========================================================================== Typography ========================================================================== */
/** Address variable `h1` font-size and margin within `section` and `article` contexts in Firefox 4+, Safari 5, and Chrome. */
h1 { font-size:2em; margin: 0.67em 0 !important;}

/** Address styling not present in IE 8/9, Safari 5, and Chrome. */
abbr[title] { border-bottom: 1px dotted; }

/** Address style set to `bolder` in Firefox 4+, Safari 5, and Chrome. */
b, strong { font-weight: bold; }

/** Address styling not present in Safari 5 and Chrome. */
dfn { font-style: italic; }

/** Address styling not present in IE 8/9. */
mark { background: #ff0; color: #000; }

/** Correct font family set oddly in Safari 5 and Chrome. */
code, kbd, pre, samp, .classname, .methodname { font-family: monospace, serif; font-size: 1em; }

/** Improve readability of pre-formatted text in all browsers. */
pre { white-space: pre-wrap; }

/** Set consistent quote types. */
q { quotes: "\201C" "\201D" "\2018" "\2019"; }

/** Address inconsistent and variable font size in all browsers. */
small { font-size: 80%; }

/** Prevent `sub` and `sup` affecting `line-height` in all browsers. */
sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }

sup { top: -0.5em; }

sub { bottom: -0.25em; }

/* ========================================================================== Embedded content ========================================================================== */
/** Remove border when inside `a` element in IE 8/9. */
img { border: 0; }

/** Correct overflow displayed oddly in IE 9. */
svg:not(:root) { overflow: hidden; }

/* ========================================================================== Figures ========================================================================== */
/** Address margin not present in IE 8/9 and Safari 5. */
figure { margin: 0; }

/* ========================================================================== Forms ========================================================================== */
/** Define consistent border, margin, and padding. */
fieldset { border: 1px solid #c0c0c0; margin: 0 2px; padding: 0.35em 0.625em 0.75em; }

/** 1. Correct `color` not being inherited in IE 8/9. 2. Remove padding so people aren't caught out if they zero out fieldsets. */
legend { border: 0; /* 1 */ padding: 0; /* 2 */ }

/** 1. Correct font family not being inherited in all browsers. 2. Correct font size not being inherited in all browsers. 3. Address margins set differently in Firefox 4+, Safari 5, and Chrome. */
button, input, select, textarea { font-family: inherit; /* 1 */ font-size: 100%; /* 2 */ margin: 0; /* 3 */ }

/** Address Firefox 4+ setting `line-height` on `input` using `!important` in the UA stylesheet. */
button, input { line-height: normal; }

/** Address inconsistent `text-transform` inheritance for `button` and `select`. All other form control elements do not inherit `text-transform` values. Correct `button` style inheritance in Chrome, Safari 5+, and IE 8+. Correct `select` style inheritance in Firefox 4+ and Opera. */
button, select { text-transform: none; }

/** 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio` and `video` controls. 2. Correct inability to style clickable `input` types in iOS. 3. Improve usability and consistency of cursor style between image-type `input` and others. */
button, html input[type="button"], input[type="reset"], input[type="submit"] { -webkit-appearance: button; /* 2 */ cursor: pointer; /* 3 */ }

/** Re-set default cursor for disabled elements. */
button[disabled], html input[disabled] { cursor: default; }

/** Remove inner padding and search cancel button in Safari 5 and Chrome on OS X. */
input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration { -webkit-appearance: none; }

/** Remove inner padding and border in Firefox 4+. */
button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0; }

/** 1. Remove default vertical scrollbar in IE 8/9. 2. Improve readability and alignment in all browsers. */
textarea { overflow: auto; /* 1 */ vertical-align: top; /* 2 */ }

/* ========================================================================== Tables ========================================================================== */
/** Remove most spacing between table cells. */
table { border-collapse: collapse; border-spacing: 0; }

td, th {border:1px solid #ddd;padding:2px 10px;}

a:hover { cursor: pointer; }

a:focus { outline: none; }

img, object, embed { max-width: 100%; height: auto; }

object, embed { height: 100%; }

img { -ms-interpolation-mode: bicubic; }

#map_canvas img, #map_canvas embed, #map_canvas object, .map_canvas img, .map_canvas embed, .map_canvas object { max-width: none !important; }

.left { float: left !important; }

.right { float: right !important; }

.text-left { text-align: left !important; }

.text-right { text-align: right !important; }

.text-center { text-align: center !important; }

.text-justify { text-align: justify !important; }

.hide { display: none; }

img { display: inline-block; vertical-align: middle; }

textarea { height: auto; min-height: 50px; }

select { width: 100%; }

p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { font-size: 1.23333em; line-height: 1.6; }

.subheader, .admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .ulist > .title, .olist > .title, .dlist > .title, .qlist > .title, .tableblock > caption { line-height: 1.4; color: #777777; font-weight: 300; margin-top: 0.2em; margin-bottom: 0.5em; }

/* Typography resets */
div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td { margin: 0; direction: ltr; }

/* Default Link Styles */
a { color: #4183c4; text-decoration: none; line-height: inherit; }

a:hover, a:focus { color: #4183c4; }

a img { border: none; }

/* Default paragraph styles */
p { margin-bottom: 1em; text-rendering: optimizeLegibility; line-height:130%;}

p aside { font-size: 0.93333em; line-height: 1.35; font-style: italic; }

/* Default header styles */
h1, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { font-family: helvetica, arial, freesans, clean, sans-serif; font-weight: bold; font-style: normal; color: #333333; text-rendering: optimizeLegibility; margin-top: 0.2em; margin-bottom: 0.5em; line-height: 1.2em; }

h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small { font-size: 60%; color: gray; line-height: 0; }

h2 {color: #003977;font-weight:normal;font-size:1.6em; border-bottom:1px solid #DDD;font-weight:bold;margin-bottom:0.5em;}

h2.rule {border-top: 1px solid #CCCCCC;padding-top: 30px;}

h4 { font-size: 0.66667em; }

h5 { font-size: 1em; }

h6 { font-size: 1em; }

hr { border: solid #DDD; border-width: 1px 0 0; clear: both; margin: 1.33333em 0 1.26667em; height: 0; }

/* Helpful Typography Defaults */
em, i { font-style: italic; line-height: inherit; }

strong, b { font-weight: bold; line-height: inherit; }

small { font-size: 60%; line-height: inherit; }

code, .classname, .methodname, .code { font-family: Monaco, "DejaVu Sans Mono", "Courier New", monospace; font-weight: normal; color: #666666; word-wrap: break-word;}

/* Unordered Lists */
ul li ul, ul li ol { margin-left: 1.33333em; margin-bottom: 0; font-size: 1em; /* Override nested font-size change */ }

ul.square li ul, ul.circle li ul, ul.disc li ul { list-style: inherit; }

ul.square { list-style-type: square; }

ul.circle { list-style-type: circle; }

ul.disc { list-style-type: disc; }

ul.no-bullet { list-style: none; }

/* Ordered Lists */
ol li ul, ol li ol { margin-left: 1.33333em; margin-bottom: 0; }

/* Definition Lists */
dl { margin-bottom:1.33333em; }

dl dt { margin-bottom: 0.33333em; font-weight: bold; }

dl dd { margin-bottom: 1.33333em; }

/* Abbreviations */
abbr, acronym { text-transform: uppercase; font-size: 90%; color: #333333; border-bottom: 1px dotted #dddddd; cursor: help; }

abbr { text-transform: none; }

/* Blockquotes */
blockquote { margin: 0 0 1em; padding: 0; border-left: none; }

blockquote cite { display: block; font-size: 0.86667em; color: #666666; }

blockquote cite:before { content: "\2014 \0020"; }

blockquote cite a, blockquote cite a:visited { color: #666666; }

blockquote, blockquote p { line-height: 1.4; color: #666666; }

/* Microformats */
.vcard { display: inline-block; margin: 0 0 1.33333em 0; border: 1px solid #dddddd; padding: 0.66667em 0.8em; }

.vcard li { margin: 0; display: block; }

.vcard .fn { font-weight: bold; font-size: 1em; }

.vevent .summary { font-weight: bold; }

.vevent abbr { cursor: auto; text-decoration: none; font-weight: bold; border: none; padding: 0 0.06667em; }

@media only screen and (min-width: 768px) { h1, h2, h3,.sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; }
  h3, .sidebarblock > .content > .title { font-size: 1.2em; }
  h4 { font-size: 1em; } }
/* Print styles.  Inlined to avoid required HTTP connection: www.phpied.com/delay-loading-your-print-css/ Credit to Paul Irish and HTML5 Boilerplate (html5boilerplate.com)
*/
.print-only { display: none !important; }

@media print { * { background: transparent !important; color: #000 !important; /* Black prints faster: h5bp.com/s */ box-shadow: none !important; text-shadow: none !important; }
  a, a:visited { text-decoration: underline; }
  a[href]:after { content: " (" attr(href) ")"; }
  abbr[title]:after { content: " (" attr(title) ")"; }
  .ir a:after, a[href^="javascript:"]:after, a[href^="#"]:after { content: ""; }
  pre, blockquote { border-left: 1px solid #999; page-break-inside: avoid; }
  thead { display: table-header-group; /* h5bp.com/t */ }
  tr, img { page-break-inside: avoid; }
  img { max-width: 100% !important; }
  @page { margin: 0.5cm; }
  p, h2, h3, #toctitle, .sidebarblock > .content > .title { orphans: 3; widows: 3; }
  h2, h3, #toctitle, .sidebarblock > .content > .title { page-break-after: avoid; }
  .hide-on-print { display: none !important; }
  .print-only { display: block !important; }
  .hide-for-print { display: none !important; }
  .show-for-print { display: inherit !important; } }
/* Tables */

code , .code{ font-size: 0.86667em; padding: 0 5px 2px 5px; white-space: nowrap; background-color: transparent; border: 1px solid #dddddd; -webkit-border-radius: 3px; border-radius: 3px; text-shadow: none; }

kbd.keyseq { color: #666666; }

kbd:not(.keyseq) { display: inline-block; color: #333333; font-size: 0.8em; line-height: 1.4; background-color: #F7F7F7; border: 1px solid #ccc; -webkit-border-radius: 3px; border-radius: 3px; -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset; box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset; margin: -0.15em 0.15em 0 0.15em; padding: 0.2em 0.6em 0.2em 0.5em; vertical-align: middle; white-space: nowrap; }

kbd kbd:first-child { margin-left: 0; }

kbd kbd:last-child { margin-right: 0; }

.menuseq, .menu { color: #1a1a1a; }

#header, #footnotes, #footer { width: 100%; margin-left: auto; margin-right: auto; margin-top: 0; margin-bottom: 0; /* max-width: 66.66667em */ *zoom: 1; position: relative; padding-left: 1em; padding-right: 1em; }

#content, #footer { margin:0 100px 0 350px; max-width: 960px; }

#header { margin-bottom: 2.66667em;}

#header > h1 { margin: 0 auto; margin-left: 350px; padding-top: 15px; padding-bottom: 20px; width: 960px; color: #FFF;}

#header span { color: #666666; }

#header #revnumber { margin: 0 auto; margin-left: 350px; width: 960px; display: block; color: #FFF; }

#header br { display: none; }

#header br + span { padding-left: 3px; }

#header br + span:before { content: "\2013 \0020"; }

#header br + span.author { padding-left: 0; }

#header br + span.author:before { content: ", "; }

#toc { border-bottom: 0 solid #dddddd; padding-bottom: 1.33333em; }

#toc > ul, #toc > ol { margin-left: 0.26667em; }

#toc ul.sectlevel0 > li > a, #toc ol.sectlevel0 > li > a { font-style: italic; }

#toc ul.sectlevel0 ul.sectlevel1, #toc ol.sectlevel0 ol.sectlevel1 { margin-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }

#toc ul, #toc ol { list-style-type: none; }

.sectlevel1 li {line-height:120%;padding:4px 0;}

#toctitle { color: #777777; }

ol.sectlevel1 {padding:0;}

.toc { margin-top: 40px; margin-left: 30px; }
#toc.toc2 { position: absolute; overflow: auto; left: 0; top: 155px; padding: 1em; width: 18em; border: 1px solid #DDD; z-index: 1000; }
#toc.toc2 #toctitle { margin-top: 0; }
#toc.toc2 ul ul, #toc.toc2 ol ol { margin-left: 0; padding-left: 1.33333em; }
#toc.toc2 ul.sectlevel0 ul.sectlevel1, #toc.toc2 ol.sectlevel0 ol.sectlevel1 { padding-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
body.toc2.toc-right { padding-left: 0; padding-right: 20em; }
body.toc2.toc-right #toc.toc2 { border-right: 0; border-left: 1px solid #dddddd; left: auto; right: 0; } 
.footer { max-width: 100%; background-color: #000; padding: 1.33333em; }

.footer-text { color: #888888; line-height: 1.26; max-width: 960px;margin: 0 auto; text-align: center;}

.sect1 { padding-bottom: 1.33333em; }

.sect1 + .sect1 { border-top: 0 solid #dddddd; }

#content h1 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor { position: absolute; width: 1em; margin-left: -1em; display: block; text-decoration: none; visibility: hidden; text-align: center; font-weight: normal; }

#content h1 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before { content: '\00A7'; font-size: .85em; vertical-align: text-top; display: block; margin-top: 0.05em; }

#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover { visibility: visible; }

#content h1 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link { color: #333333; text-decoration: none; }

#content h1 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover { color: #262626; }

.admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .ulist > .title, .olist > .title, .dlist > .title, .qlist > .title { text-align: left; font-weight: bold; }

.tableblock > caption { text-align: left; font-weight: bold; white-space: nowrap; overflow: visible; max-width: 0; }

table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p { font-size: inherit; }

.admonitionblock > table { border: 0; background: none; width: 100%;}

.admonitionblock > table td.icon { text-align: center; width: 80px; }

.admonitionblock > table td.icon img { max-width: none; }

.admonitionblock > table td.icon .title { font-weight: bold; text-transform: uppercase; }

.admonitionblock > table td.content { padding-left: 1.2em; padding-right: 1.33333em; border-left: 1px solid #dddddd; color: #666666; }

.admonitionblock > table td.content > .paragraph:last-child > p { margin-bottom: 0; }

.exampleblock > .content { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.33333em; padding: 1.33333em; background: white; -webkit-border-radius: 3px; border-radius: 3px; }

.exampleblock > .content > :first-child { margin-top: 0; }

.exampleblock > .content > :last-child { margin-bottom: 0; }

.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6, .exampleblock > .content p { color: #333333; }

.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6 { line-height: 1; margin-bottom: 0.66667em; }

.exampleblock > .content h1.subheader, .exampleblock > .content h2.subheader, .exampleblock > .content h3.subheader, .exampleblock > .content .subheader#toctitle, .sidebarblock.exampleblock > .content > .subheader.title, .exampleblock > .content h4.subheader, .exampleblock > .content h5.subheader, .exampleblock > .content h6.subheader { line-height: 1.4; }

.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child { margin-bottom: 0; }

.exampleblock.result > .content { -webkit-box-shadow: 0 1px 8px #eaeaea; box-shadow: 0 1px 8px #eaeaea; }

.sidebarblock { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.33333em; padding: 1.33333em; background: white; -webkit-border-radius: 3px; border-radius: 3px; }

.sidebarblock > :first-child { margin-top: 0; }

.sidebarblock > :last-child { margin-bottom: 0; }

.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6, .sidebarblock p { color: #333333; }

.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6 { line-height: 1; margin-bottom: 0.66667em; }

.sidebarblock h1.subheader, .sidebarblock h2.subheader, .sidebarblock h3.subheader, .sidebarblock .subheader#toctitle, .sidebarblock > .content > .subheader.title, .sidebarblock h4.subheader, .sidebarblock h5.subheader, .sidebarblock h6.subheader { line-height: 1.4; }

.sidebarblock > .content > .title { color: #777777; margin-top: 0; line-height: 1.4; border-width: 0 0 1px 0; border-style: solid; border-color: #cacaca; }

.sidebarblock > .content > .paragraph:last-child p { margin-bottom: 0; }

.verseblock { margin-bottom: 1.33333em; }

.literalblock, .listingblock { margin-bottom: 1.33333em; }

.literalblock > .content > pre, .listingblock > .content > pre { background-color: #F8F8F8; color:#4d4d4d; margin: 15px 0; padding: 10px 5px; border-left: 1px solid #298cc3; font: 12px/24px Consolas,"Andale Mono WT","Andale Mono","Lucida Console","Lucida Sans Typewriter","DejaVu Sans Mono","Bitstream Vera Sans Mono","Liberation Mono","Nimbus Mono L",Monaco,"Courier New",Courier,monospace; word-wrap: break-word; line-height: 1.6; }

.literalblock > .content > pre.nowrap, .listingblock > .content > pre.nowrap { overflow-x: auto; white-space: pre; word-wrap: normal; }

.literalblock > .content > pre > code, .listingblock > .content > pre > code { white-space: inherit; color:#4d4d4d; font: 12px/24px Consolas,"Andale Mono WT","Andale Mono","Lucida Console","Lucida Sans Typewriter","DejaVu Sans Mono","Bitstream Vera Sans Mono","Liberation Mono","Nimbus Mono L",Monaco,"Courier New",Courier,monospace; padding: 0; background: none; font-weight: normal; border: none; }

@media only screen { .literalblock > .content > pre, .listingblock > .content > pre { font-size: 0.69333em; } }
@media only screen and (min-width: 768px) { .literalblock > .content > pre, .listingblock > .content > pre { font-size: 0.78em; } }
@media only screen and (min-width: 1280px) { .literalblock > .content > pre, .listingblock > .content > pre { font-size: 0.86667em; } }
.listingblock:hover .xml:before { content: "xml"; text-transform: uppercase; float: right; font-size: 0.9em; color: #999; }

.listingblock:hover .html:before { content: "html"; text-transform: uppercase; float: right; font-size: 0.9em; color: #999; }

.listingblock:hover .ruby:before { content: "ruby"; text-transform: uppercase; float: right; font-size: 0.9em; color: #999; }

.listingblock:hover .asciidoc:before { content: "asciidoc"; text-transform: uppercase; float: right; font-size: 0.9em; color: #999; }

.listingblock:hover .java:before { content: "java"; text-transform: uppercase; float: right; font-size: 0.9em; color: #999; }

.listingblock:hover .javascript:before { content: "javascript"; text-transform: uppercase; float: right; font-size: 0.9em; color: #999; }

.listingblock:hover .css:before { content: "css"; text-transform: uppercase; float: right; font-size: 0.9em; color: #999; }

.listingblock:hover .scss:before { content: "scss"; text-transform: uppercase; float: right; font-size: 0.9em; color: #999; }

.quoteblock { margin: 0 0 1em; padding: 0; border-left: none; }

.quoteblock blockquote { margin: 0 0 1em 0; padding: 0 0 0.6em 0; border: 0; }

.quoteblock blockquote > .paragraph:last-child p { margin-bottom: 0; }

.quoteblock .attribution { margin-top: -.25em; padding-bottom: 0.6em; font-size: 0.86667em; color: #666666; }

.quoteblock .attribution br { display: none; }

.quoteblock .attribution cite { display: block; margin-bottom: 0.66667em; }

table thead th, table tfoot th { font-weight: bold; }

table.tableblock.grid-all { border-collapse: collapse; border-spacing: 1px; -webkit-border-radius: 3px; border-radius: 3px; border-top: 1px solid #dddddd; }

table.tableblock.frame-topbot, table.tableblock.frame-none { border-left: 0; border-right: 0; }

table.tableblock.frame-sides, table.tableblock.frame-none { border-top: 0; border-bottom: 0; }

table.tableblock td .paragraph:last-child p, table.tableblock td > p:last-child { margin-bottom: 0; }

th.tableblock.halign-left, td.tableblock.halign-left { text-align: left; }

th.tableblock.halign-right, td.tableblock.halign-right { text-align: right; }

th.tableblock.halign-center, td.tableblock.halign-center { text-align: center; }

th.tableblock.halign-top, td.tableblock.halign-top { vertical-align: top; }

th.tableblock.halign-bottom, td.tableblock.halign-bottom { vertical-align: bottom; }

th.tableblock.halign-middle, td.tableblock.halign-middle { vertical-align: middle; }

p.tableblock.header { color: #222222; font-weight: bold; }

td > div.verse { white-space: pre; }

ol { margin-left: 0.96667em; }

ul li ol { margin-left: 0.7em; }

dl dd { margin-left: 1.125em; }

dl dd:last-child, dl dd:last-child > :last-child { margin-bottom: 0; }

.unstyled dl dt { font-weight: normal; font-style: normal; }

ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .olist, .olist .ulist { margin-bottom: 0.5em; }

ul.unstyled, ol.unnumbered, ul.checklist { list-style-type: none; margin-left: 0.66667em; }

ol.arabic { list-style-type: decimal; }

ol.decimal { list-style-type: decimal-leading-zero; }

ol.loweralpha { list-style-type: lower-alpha; }

ol.upperalpha { list-style-type: upper-alpha; }

ol.lowerroman { list-style-type: lower-roman; }

ol.upperroman { list-style-type: upper-roman; }

ol.lowergreek { list-style-type: lower-greek; }

.hdlist > table, .colist > table { border: 0; background: none; }

.hdlist > table > tbody > tr, .colist > table > tbody > tr { background: none; }

.literalblock + .colist, .listingblock + .colist { margin-top: -0.5em; }

.colist > table tr > td:first-of-type { padding: 0 .8em; line-height: 1; }

.colist > table tr > td:last-of-type { padding: 0.26667em 0; }

td.hdlist1 { vertical-align: top; padding-right: .8em; font-weight: bold; }

.qanda > ol > li > p:first-child { color: #3876b4; }

.thumb, .th { line-height: 0; display: inline-block; border: solid 4px white; -webkit-box-shadow: 0 0 0 1px #dddddd; box-shadow: 0 0 0 1px #dddddd; }

.imageblock { margin-bottom: 1.33333em; }

.imageblock.left, .imageblock[style*="float: left"] { margin: 0.26667em 0.66667em 1.33333em 0; }

.imageblock.right, .imageblock[style*="float: right"] { margin: 0.26667em 0 1.33333em 0.66667em; }

.imageblock > .title { margin-bottom: 0; }

.imageblock.thumb, .imageblock.th { border-width: 6px; }

.imageblock.thumb > .title, .imageblock.th > .title { padding: 0 0.13333em; }

.image.left, .image.right { margin-top: 0.26667em; margin-bottom: 0.26667em; display: inline-block; line-height: 0; }

.image.left { margin-right: 0.66667em; }

.image.right { margin-left: 0.66667em; }

span.footnote, span.footnoteref { vertical-align: super; font-size: 0.93333em; }

span.footnote a, span.footnoteref a { text-decoration: none; }

#footnotes { padding: 0.8em 0.4em; margin-bottom: 1em; }

#footnotes hr { width: 20%; min-width: 6.66667em; margin: -.25em 0 .75em 0; border-width: 1px 0 0 0; }

#footnotes .footnote { line-height: 1.3; font-size: 0.93333em; margin-left: 1.2em; text-indent: -1.2em; margin-bottom: .2em; }

#footnotes .footnote a:first-of-type { font-weight: bold; text-decoration: none; }

#footnotes .footnote:last-of-type { margin-bottom: 0; }

#content #footnotes { margin-top: -0.66667em; }

.gist .file-data > table { border: none; background: #fff; width: 100%; margin-bottom: 0; }

.gist .file-data > table td.line-data { width: 99%; }

.admonitionblock td.icon [class^="icon-"]:before { font-size: 2.5em; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); cursor: default; }

.admonitionblock td.icon .icon-note:before { content: "\f05a"; color: #4183c4; color: #2e6295; }

.admonitionblock td.icon .icon-tip:before { content: "\f0eb"; text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8); color: #111; }

.admonitionblock td.icon .icon-warning:before { content: "\f071"; color: #bf6900; }

.admonitionblock td.icon .icon-caution:before { content: "\f06d"; color: #bf3400; }

.admonitionblock td.icon .icon-important:before { content: "\f06a"; color: #bf0000; }

.conum { display: inline-block; color: white !important; background-color: #333333; -webkit-border-radius: 100px; border-radius: 100px; text-align: center; width: 20px; height: 20px; font-size: 12px; font-weight: bold; line-height: 20px; font-family: Arial, sans-serif; font-style: normal; position: relative; top: -2px; letter-spacing: -1px; }

.conum * { color: white !important; }

.conum + b { display: none; }

.conum:after { content: attr(data-value); }

.conum:not([data-value]):empty { display: none; }

p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { font-size: 1em; color: #666666; }

/*h2 { color: #325D72; border-bottom: 1px solid #dddddd; }*/

#content { margin-top: 15px; }

#content h1 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor { color: #333333; }

#header, #content, #footnotes { /*max-width: 660px;*/ padding-left: 0; padding-right: 0; }

#content ul li { padding-left: .7em; }

.olist.procedure > ol { counter-reset: li; list-style: none; position: relative; }

.olist.procedure > ol > li { position: relative; padding: 5px 0 5px 55px; margin-bottom: 5px; }

.olist.procedure > ol > li:before { content: counter(li); counter-increment: li; position: absolute; top: 0; left: 0; height: 100%; width: 30px; padding: 0 10px 0 0; color: #999; font-size: 1.46667em; font-weight: bold; line-height: 1.6; text-align: right; border-right: 1px solid #ddd; }

.quoteblock blockquote { padding-left: 1em; }

.sidebarblock > .content > .title { margin-top: -20px; margin-right: -20px; margin-left: -20px; margin-bottom: 20px; padding: 1em; font-size: 0.8em; background: #eaeaea; }

#header { margin-bottom: 0; padding-top: 5px; min-height: 91px; border-top: 1px solid #000; background: #000; }

/* Code for container left justified */

.container { margin:0 100px 0 40px; padding: 0; max-width:1230px;}

.container:after { content: "\0020"; display: block; height: 0; clear: both; visibility: hidden; }

.columns { float: left; display: inline; margin-left: 10px; margin-right: 10px; }

.branding {background-image: url(); width:256px; height:46px; background-repeat:no-repeat;float: left; cursor: pointer; margin:24.120px 0;}

.header-top {float: right; position: relative; left: 15px;}

.menu-top-header-container { float:left; }

#menu-top-header { margin: 0; }

.header-top li {float:left; display:inline; padding: 0 0 0 10px; }

.header-top li a { color: #298cc3 !important; text-transform: uppercase; }

#menu-item-516 {background: none repeat scroll 0 0 #ED1C24; border-radius: 2px; color: #FFFFFF; display: inline-block;font-size: 10px; font-weight: 600; height: 21px; line-height: 21px; min-width: 85px; text-align: center; margin-left:10px; margin-top:3px; padding:0px 5px 0px 5px;
}
#menu-item-516 a { color:#fff !important; }

#nav { float: right; margin: 20px 0 0 0; text-align: right; text-transform: uppercase; font-size: 17px ; line-height: 19px ; font-weight: 600; min-width:660px; }

#nav ul { margin: 0; padding: 0; list-style: none; }
#nav > .menu-home-container > ul > li { display: inline-block; vertical-align: top; margin: 0 0 0 4%; position: relative; }
#nav ul li a { color: #fff; }
#nav ul li a:hover { color: #999; text-decoration: none; }
#nav .current_page_item a,
#nav .current-page-ancestor a,
#nav .current-menu-item a,
#nav .current-menu-ancestor a { color: #298cc3;  }
#nav > .menu-home-container > ul > li ul { display: none; position: absolute;  }
#nav > .menu-home-container > ul > li:hover ul { display: block; }
#nav ul.sub-menu {    background-color: #ccc; border-radius: 0 0 5px 5px; box-shadow: 0 1px 1px rgba(0, 0, 0, 0.2); text-align: left; min-width:200px; white-space: normal; display:block; padding-top: 10px; margin-top:2px; z-index:99; }
#nav ul ul.sub-menu li { display: block; }
#nav ul ul.sub-menu li { border: medium none; }
#nav ul ul.sub-menu li a { }
#nav ul ul.sub-menu li a { color: #003977; font-size: 12px; line-height:14px; margin-bottom: 5px; float: none; display: block; line-height: 16px; padding: 2px 0 2px 8px; position: relative; white-space: normal; width: 210px; }
#nav ul ul.sub-menu li a:hover { color:#fff; }

.header-google{float: left; height: 20px!important; width: 190px; margin-left:10px;position:relative; top:4px; left: 2px;}

input.gsc-input { width: 116px !important; height: 12px !important; font-size:12px !important; border: 1px solid #BBB; padding: 3px 6px; float: left;}

input.gsc-search-button { background: url(') no-repeat !important; text-indent: -9999em; border: none !important; width: 40px; margin-left: 4px; border-color: #000000; float: left; }

a, a:link, a:visited, a:active { color: #298EC5; text-decoration:none; }

a:hover { color: #0060B8; text-decoration:underline; }

.note { margin-bottom: 20px; }
      </style>
      <link rel="stylesheet" href="">
    <link rel="stylesheet" href="">
    <script src=""></script>
    <script>hljs.initHighlightingOnLoad()</script>

  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-188528-5']);
    _gaq.push(['_setDomainName', 'cascading.org']);
    _gaq.push(['_trackPageview']);

    (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? ' : ') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
</head>
<body class="book toc2">
<div id="header">
  <div class="container">
    <div class="branding" onclick="location.href='"></div>
    <div class="header-top">
      <div class="menu-top-header-container">
        <ul id="menu-top-header" class="menu">
          <li id="menu-item-267" class="menu-item-first menu-item menu-item-type-custom menu-item-object-custom menu-item-267"><a href="">Forums</a></li>
          <li id="menu-item-265" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-265"><a href="">Products</a></li>
          <li id="menu-item-475" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-475"><a href="">Downloads</a></li>
          <li id="menu-item-266" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-266"><a href="">SDK</a></li>
          <li id="menu-item-516" class="menu-item-last menu-item menu-item-type-custom menu-item-object-custom menu-item-516"><a target="_blank" href="">Driven Login</a></li>
        </ul>
      </div>

      <div class="header-google">
        <script>
          jQuery("gsc-i-id1").keyup(function(e){
            if(event.keyCode == 13){
              alert("pressed enter");
              $("#gsc-b-id1").click();
            }
          });

          function OpenInNewTab(url) {
            var win = window.open(url, '_blank');
            win.focus();
          }
        </script>
        <div class="gsc-bar">
          <input onkeydown="if (event.keyCode == 13) OpenInNewTab('http://www.cascading.org/search_gcse-2/?search=' + this.value)" autocomplete="off" type="text" size="10" class="gsc-input" name="search" title="search" id="gsc-i-id1" spellcheck="false" style="outline: none;"></div>
        <div class="gsc-bar">
          <input type="button" value="Search" class="gsc-search-button" title="search" onclick="OpenInNewTab(' + document.getElementById('gsc-i-id1').value)">
        </div>
      </div>
    </div>
    <nav id="nav">
      <div class="menu-home-container">
        <ul id="menu-home" class="nav-menu">
          <li id="menu-item-430" class="menu-item-first menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-430"><a href="ch13-using-operations.html#">Projects</a>
            <ul class="sub-menu">
              <li id="menu-item-339" class="menu-item menu-item-type-post_type menu-item-object-extension menu-item-339"><a href="">Cascading</a></li>
              <li id="menu-item-362" class="menu-item menu-item-type-post_type menu-item-object-extension menu-item-362"><a href="">Lingual</a></li>
              <li id="menu-item-381" class="menu-item menu-item-type-post_type menu-item-object-extension menu-item-381"><a href="">Pattern</a></li>
              <li id="menu-item-640" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-640"><a href="">Scalding</a></li>
              <li id="menu-item-641" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-641"><a href="">Cascalog</a></li>
              <li id="menu-item-144" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-144"><a href="">Load</a></li>
              <li id="menu-item-145" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-145"><a href="">Multitool</a></li>
            </ul>
          </li>
          <li id="menu-item-96" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-96"><a href="">Extensions</a></li>
          <li id="menu-item-571" class="menu-item menu-item-type-custom menu-item-object-custom current-menu-parent menu-item-has-children menu-item-571"><a href="ch13-using-operations.html#">Resources</a>
            <ul class="sub-menu">
              <li id="menu-item-95" class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-92 current_page_item menu-item-95"><a href="">Documentation</a></li>
              <li id="menu-item-334" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-334"><a href="">Tutorials</a></li>
              <li id="menu-item-514" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-514"><a target="_blank" href="">Driven</a></li>
            </ul>
          </li>
          <li id="menu-item-572" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-572"><a href="ch13-using-operations.html#">Support</a>
            <ul class="sub-menu">
              <li id="menu-item-427" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-427"><a href="">Overview</a></li>
              <li id="menu-item-590" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-590"><a href="">Compatibility</a></li>
            </ul>
          </li>
          <li id="menu-item-97" class="menu-item-last menu-item menu-item-type-post_type menu-item-object-page menu-item-97"><a href="">News</a></li>
        </ul>
      </div>
    </nav>

  </div>
          <span id="revnumber">version 3.0-20160112</span>
        <div id="toc" class="toc2">
          <div id="toctitle">Table of Contents</div>
          <ul class="sectlevel1">
<li><a href="ch13-using-operations.html#_using_and_developing_operations">Using and Developing Operations</a>
<ul class="sectlevel2">
<li><a href="ch13-using-operations.html#_introduction">Introduction</a></li>
<li><a href="ch13-using-operations.html#functions">Functions</a></li>
<li><a href="ch13-using-operations.html#filters">Filters</a></li>
<li><a href="ch13-using-operations.html#aggregators">Aggregators</a></li>
<li><a href="ch13-using-operations.html#buffers">Buffers</a></li>
<li><a href="ch13-using-operations.html#_operation_and_baseoperation">Operation and BaseOperation</a></li>
</ul>
</li>
</ul>
        </div>
</div>
<div id="content">
  <h1>Cascading 3.0 User Guide - Using and Developing Operations</h1>
  <div class="sect1">
<h2 id="_using_and_developing_operations"><a class="anchor" href="ch13-using-operations.html#_using_and_developing_operations"></a>Using and Developing Operations</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_introduction"><a class="anchor" href="ch13-using-operations.html#_introduction"></a>Introduction</h3>
<div class="paragraph">
<p>Previous sections of this guide covered setting up sources and sinks, shaping
the data streams, referencing the data fields, and so on. Within this Pipe
framework, Operations are used to act upon the data&#8201;&#8212;&#8201;e.g., alter it, filter
it, analyze it, or transform it. You can use the standard Operations in the
Cascading library to create powerful and robust applications by combining them
in chains (much like UNIX operations, such as <em>sed</em>, <em>grep</em>, <em>sort</em>, <em>uniq</em>, and
<em>awk</em>). And if you want to go further, it&#8217;s also very simple to develop custom
Operations in Cascading.</p>
</div>
<div class="paragraph">
<p>There are four kinds of Operations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="ch13-using-operations.html#functions"><span class="classname">Function</span></a></p>
</li>
<li>
<p><a href="ch13-using-operations.html#filters"><span class="classname">Filter</span></a></p>
</li>
<li>
<p><a href="ch13-using-operations.html#aggregators"><span class="classname">Aggregator</span></a></p>
</li>
<li>
<p><a href="ch13-using-operations.html#buffers"><span class="classname">Buffer</span></a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="image"><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjE4NiAxOTQgMjY3IDE1MCIKICAgICB3aWR0aD0iMjY3cHQiIGhlaWdodD0iMTUwcHQiPjxtZXRhZGF0YSB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iPjxkYzpkYXRlPjIwMDgtMTEtMDMgMDE6MTJaPC9kYzpkYXRlPgogIDwhLS0gUHJvZHVjZWQgYnkgT21uaUdyYWZmbGUgUHJvZmVzc2lvbmFsIDUuMC4yIC0tPjwvbWV0YWRhdGE+PGRlZnM+PGZvbnQtZmFjZSBmb250LWZhbWlseT0iSGVsdmV0aWNhIiBmb250LXNpemU9IjEwIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bml0cy1wZXItZW09IjEwMDAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuZGVybGluZS1wb3NpdGlvbj0iLTc1LjY4MzU5NCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5kZXJsaW5lLXRoaWNrbmVzcz0iNDkuMzE2NDA2IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbG9wZT0iMCIgeC1oZWlnaHQ9IjU1MCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FwLWhlaWdodD0iNzAwIiBhc2NlbnQ9Ijc3MC4wMTk1MyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY2VudD0iLTIyOS45ODA0NyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ9ImJvbGQiPjxmb250LWZhY2Utc3JjPjxmb250LWZhY2UtbmFtZQogIG5hbWU9IkhlbHZldGljYS1Cb2xkIi8+PC9mb250LWZhY2Utc3JjPjwvZm9udC1mYWNlPjxmb250LWZhY2UgZm9udC1mYW1pbHk9IkhlbHZldGljYSIgZm9udC1zaXplPSI5IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5pdHMtcGVyLWVtPSIxMDAwIiB1bmRlcmxpbmUtcG9zaXRpb249Ii03NS42ODM1OTQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bmRlcmxpbmUtdGhpY2tuZXNzPSI0OS4zMTY0MDYiIHNsb3BlPSIwIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeC1oZWlnaHQ9IjU1NS41NTU1NCIgY2FwLWhlaWdodD0iNzIyLjIyMjIzIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNjZW50PSI3NzAuMDE5NTMiIGRlc2NlbnQ9Ii0yMjkuOTgwNDciCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250LXdlaWdodD0iYm9sZCI+PGZvbnQtZmFjZS1zcmM+PGZvbnQtZmFjZS1uYW1lCiAgbmFtZT0iSGVsdmV0aWNhLUJvbGQiLz48L2ZvbnQtZmFjZS1zcmM+PC9mb250LWZhY2U+PG1hcmtlciBvcmllbnQ9ImF1dG8iIG92ZXJmbG93PSJ2aXNpYmxlIiBtYXJrZXJVbml0cz0ic3Ryb2tlV2lkdGgiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0iRmlsbGVkQXJyb3dfTWFya2VyIiB2aWV3Qm94PSItMSAtNCAxMCA4IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFya2VyV2lkdGg9IjEwIiBtYXJrZXJIZWlnaHQ9IjgiIGNvbG9yPSJibGFjayI+PGc+PHBhdGgKICBkPSJNIDggMCBMIDAgLTMgTCAwIDMgWiIgZmlsbD0iY3VycmVudENvbG9yIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIxIi8+PC9nPjwvbWFya2VyPjwvZGVmcz48ZwogIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLW9wYWNpdHk9IjEiIHN0cm9rZS1kYXNoYXJyYXk9Im5vbmUiIGZpbGw9Im5vbmUiIGZpbGwtb3BhY2l0eT0iMSI+PHRpdGxlPk1vZGVsPC90aXRsZT48Zz48dGl0bGU+TGF5ZXIgMTwvdGl0bGU+PGNpcmNsZQogIGN4PSIyMTYuOCIgY3k9IjMxMi43OTk5OSIgcj0iMjguODAwMDU1IiBmaWxsPSIjNWViNGZmIi8+PGNpcmNsZSBjeD0iMjE2LjgiIGN5PSIzMTIuNzk5OTkiIHI9IjI4LjgwMDA1NSIgc3Ryb2tlPSJibGFjayIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2Utd2lkdGg9IjEiLz48dGV4dAogIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE5NS43NiAzMDYuODAwMDIpIiBmaWxsPSJibGFjayI+PHRzcGFuIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EiIGZvbnQtc2l6ZT0iMTAiIGZvbnQtd2VpZ2h0PSJib2xkIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg9Ii4zOTQwNDI5NyIgeT0iMTAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dExlbmd0aD0iNDIuMjExOTE0Ij5GdW5jdGlvbjwvdHNwYW4+PC90ZXh0PjxjaXJjbGUKICBjeD0iMzE4LjM4OCIgY3k9IjIyNC44IiByPSIyOC44MDAwNTUiIGZpbGw9IiM1ZWI0ZmYiLz48Y2lyY2xlIGN4PSIzMTguMzg4IiBjeT0iMjI0LjgiIHI9IjI4LjgwMDA1NSIgc3Ryb2tlPSJibGFjayIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZS13aWR0aD0iMSIvPjx0ZXh0CiAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjk1LjM0ODAyIDIxOC44KSIgZmlsbD0iYmxhY2siPjx0c3BhbiBmb250LWZhbWlseT0iSGVsdmV0aWNhIiBmb250LXNpemU9IjEwIiBmb250LXdlaWdodD0iYm9sZCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg9Ii4zODY3MTg3NSIgeT0iMTAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0TGVuZ3RoPSI0Ny4yMjY1NjIiPk9wZXJhdGlvbjwvdHNwYW4+PC90ZXh0PjxjaXJjbGUKICBjeD0iMjg1LjI0Njk4IiBjeT0iMzEyLjc5OTk5IiByPSIyOC44MDAwNTgiIGZpbGw9IiM1ZWI0ZmYiLz48Y2lyY2xlIGN4PSIyODUuMjQ2OTgiIGN5PSIzMTIuNzk5OTkiIHI9IjI4LjgwMDA1OCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZT0iYmxhY2siIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMSIvPjx0ZXh0CiAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjY3LjIwNyAzMDYuODAwMDIpIiBmaWxsPSJibGFjayI+PHRzcGFuIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EiIGZvbnQtc2l6ZT0iMTAiIGZvbnQtd2VpZ2h0PSJib2xkIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4PSI1LjgxNTg3OCIgeT0iMTAiIHRleHRMZW5ndGg9IjI0LjQ0ODI0MiI+RmlsdGVyPC90c3Bhbj48L3RleHQ+PGNpcmNsZQogIGN4PSIzNTMuNjk0IiBjeT0iMzEyLjc5OTk5IiByPSIyOC44MDAwNjIiIGZpbGw9IiM1ZWI0ZmYiLz48Y2lyY2xlIGN4PSIzNTMuNjk0IiBjeT0iMzEyLjc5OTk5IiByPSIyOC44MDAwNjIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlPSJibGFjayIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMSIvPjx0ZXh0CiAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzI5LjY1NDAyIDMwNy4zMDAwMikiIGZpbGw9ImJsYWNrIj48dHNwYW4gZm9udC1mYW1pbHk9IkhlbHZldGljYSIgZm9udC1zaXplPSI5IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0PSJib2xkIiB4PSIuMjQ4Nzc5MyIgeT0iOSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0TGVuZ3RoPSI0OC41MDI0NCI+QWdncmVnYXRvcjwvdHNwYW4+PC90ZXh0PjxwYXRoCiAgZD0iTSAyMTYuOCAyODMuOTk5OTcgTCAyMTYuOCAyNzIuMDk5OTggTCAyMTYuOCAyNjkuMDk5OTggTCAzMTguMzg4IDI2OS4wOTk5OCBMIDMxOC4zODggMjY1LjUwMDAzIEwgMzE4LjM4OCAyNjMuNTAwMDMiCiAgbWFya2VyLWVuZD0idXJsKCNGaWxsZWRBcnJvd19NYXJrZXIpIiBzdHJva2U9ImJsYWNrIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMSIvPjxwYXRoCiAgZD0iTSAzNTMuNjk0IDI4My45OTk5NyBMIDM1My42OTQgMjcyLjA5OTk4IEwgMzUzLjY5NCAyNjkuMDk5OTggTCAzMTguMzg4IDI2OS4wOTk5OCBMIDMxOC4zODggMjY1LjUwMDAzIEwgMzE4LjM4OCAyNjMuNTAwMDMiCiAgbWFya2VyLWVuZD0idXJsKCNGaWxsZWRBcnJvd19NYXJrZXIpIiBzdHJva2U9ImJsYWNrIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMSIvPjxjaXJjbGUKICBjeD0iNDIyLjE0MSIgY3k9IjMxMi43OTk5OSIgcj0iMjguODAwMDYyIiBmaWxsPSIjNWViNGZmIi8+PGNpcmNsZSBjeD0iNDIyLjE0MSIgY3k9IjMxMi43OTk5OSIgcj0iMjguODAwMDYyIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZT0iYmxhY2siIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjEiLz48dGV4dAogIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQwNC4xMDEwMSAzMDcuMzAwMDIpIiBmaWxsPSJibGFjayI+PHRzcGFuIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EiIGZvbnQtc2l6ZT0iOSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250LXdlaWdodD0iYm9sZCIgeD0iNC43OTA0ODczIiB5PSI5IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRMZW5ndGg9IjI2LjQ5OTAyMyI+QnVmZmVyPC90c3Bhbj48L3RleHQ+PHBhdGgKICBkPSJNIDQyMi4xNDEgMjgzLjk5OTk3IEwgNDIyLjE0MSAyNzIuMDk5OTggTCA0MjIuMTQxIDI2OS4wOTk5OCBMIDMxOC4zODggMjY5LjA5OTk4IEwgMzE4LjM4OCAyNjUuNTAwMDMgTCAzMTguMzg4IDI2My41MDAwMyIKICBtYXJrZXItZW5kPSJ1cmwoI0ZpbGxlZEFycm93X01hcmtlcikiIHN0cm9rZT0iYmxhY2siIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIxIi8+PHBhdGgKICBkPSJNIDI4NS4yNDY5OCAyODMuOTk5OTcgTCAyODUuMjQ2OTggMjcyLjA5OTk4IEwgMjg1LjI0Njk4IDI2OS4wOTk5OCBMIDMxOC4zODggMjY5LjA5OTk4IEwgMzE4LjM4OCAyNjUuNTAwMDMgTCAzMTguMzg4IDI2My41MDAwMyIKICBtYXJrZXItZW5kPSJ1cmwoI0ZpbGxlZEFycm93X01hcmtlcikiIHN0cm9rZT0iYmxhY2siIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIxIi8+PC9nPjwvZz48L3N2Zz4K" alt="operations"></span></p>
</div>
<div class="paragraph">
<p>Operations typically require a <em>multivalued</em> Tuple as an input value. And all
Operations can return <strong><em>zero or more</em></strong> <em>multivalued</em> Tuple results&#8201;&#8212;&#8201;except
<span class="classname">Filter</span>, which simply returns a Boolean indicating whether to
discard the current Tuple.</p>
</div>
<div class="paragraph">
<p>A <span class="classname">Function</span>, for instance, can parse a string passed by an argument
Tuple and return a new Tuple for every value parsed (i.e., one Tuple for each
"word"), or it may create a single Tuple with every parsed value included as an
element in one Tuple object (e.g., one Tuple with "first-name" and "last-name"
fields).</p>
</div>
<div class="paragraph">
<p>In theory, a <span class="classname">Function</span> can be used as a <span class="classname">Filter</span> by not
emitting a Tuple result. However, the <span class="classname">Filter</span> type is optimized for
filtering, and can be combined with logical Operations such as <span class="classname">Not</span>,
<span class="classname">And</span>, <span class="classname">Or</span>, etc.</p>
</div>
<div class="paragraph">
<p>During runtime, Operations actually receive arguments as one or more instances
of the <span class="classname">TupleEntry</span> object. The TupleEntry object holds the current
<span class="classname">Tuple</span>, and a <span class="classname">Fields</span> object that defines field names
for positions within the Tuple.</p>
</div>
<div class="paragraph">
<p>Except for <span class="classname">Filter</span>, all Operations must declare result Fields. If
the actual output does not match the declaration, the process fails. For
example, consider a <span class="classname">Function</span> written to parse words out of a String
and return a new Tuple for each word. If it declares that its intended output is
a Tuple with a single field named "word," and then returns more values in the
Tuple beyond that single "word," processing halts. However, Operations designed
to return arbitrary numbers of values in a result Tuple may declare
<span class="code">Fields.UNKNOWN</span>.</p>
</div>
<div class="paragraph">
<p>The Cascading planner always attempts to "fail fast" where possible by checking
the field name dependencies between Pipes and Operations, but there may be some
cases the planner cannot assess.</p>
</div>
<div class="paragraph">
<p>All Operations must be wrapped by either an <span class="classname">Each</span> or an
<span class="classname">Every</span> pipe instance. The pipe is responsible for passing in an
argument Tuple and accepting the resulting output Tuple from the Operation. In
addition, the pipe merges or replaces the incoming Tuple values with the results
of the Operation.</p>
</div>
<div class="paragraph">
<p>Operations by default are assumed by the Cascading planner to be "safe." A safe
Operation is idempotent; it can safely execute multiple times on the exact same
record or Tuple; it has no side-effects. If a custom Operation is not
idempotent, the <span class="code">isSafe()</span> method must return <span class="code">false</span>. This value
influences how the Cascading planner renders the Flow under certain
circumstances.</p>
</div>
</div>
<div class="sect2">
<h3 id="functions"><a class="anchor" href="ch13-using-operations.html#functions"></a>Functions</h3>
<div class="paragraph">
<p>A <span class="classname">Function</span> expects a stream of individual argument Tuples, and
returns zero or more result Tuples for each of them. Like a <span class="classname">Filter</span>,
a <span class="classname">Function</span> is used with an <span class="classname">Each</span> pipe, which may follow
any pipe type.</p>
</div>
<div class="paragraph">
<p>To create a custom <span class="classname">Function</span>, subclass the
<span class="code">cascading.operation.BaseOperation</span> class and implement the
<span class="code">cascading.operation.Function</span> interface. Since the <span class="code">BaseOperation</span>
has been subclassed, the <span class="code">operate</span> method, as defined on the
<span class="code">Function</span> interface, is the only method that must be implemented.</p>
</div>
<div class="exampleblock">
<div class="title">Example 1. Custom Function</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java" data-lang="java">public class SomeFunction extends BaseOperation implements Function
  {
  public void operate( FlowProcess flowProcess, FunctionCall functionCall )
    {
    // get the arguments TupleEntry
    TupleEntry arguments = functionCall.getArguments();

    // create a Tuple to hold our result values
    Tuple result = new Tuple();

    // insert some values into the result Tuple

    // return the result Tuple
    functionCall.getOutputCollector().add( result );
    }
  }</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Whenever possible, functions should declare both the number of argument values
they expect and the field names of the Tuple they return. However, these
declarations are optional, as explained below.</p>
</div>
<div class="paragraph">
<p>For input, functions must accept one or more values in a Tuple as arguments. If
not specified, the default is to accept any number of values
(<span class="code">Operation.ANY</span>). Cascading verifies during planning that the number of
arguments selected matches the number of arguments expected.</p>
</div>
<div class="paragraph">
<p>For output, it is a good practice to declare the field names that a function
returns. If not specified, the default is <span class="code">Fields.UNKNOWN</span>, meaning that
an unknown number of fields are returned in each Tuple.</p>
</div>
<div class="paragraph">
<p>Both declarations&#8201;&#8212;&#8201;the number of input arguments and declared result fields&#8201;&#8212;&#8201;must be done on the constructor, either by passing default values to the super
constructor or by accepting the values from the user via a constructor
implementation.</p>
</div>
<div class="exampleblock">
<div class="title">Example 2. AddValuesFunction</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java" data-lang="java">public class AddValuesFunction extends BaseOperation implements Function
  {
  public AddValuesFunction()
    {
    // expects 2 arguments, fail otherwise
    super( 2, new Fields( "sum" ) );
    }

  public AddValuesFunction( Fields fieldDeclaration )
    {
    // expects 2 arguments, fail otherwise
    super( 2, fieldDeclaration );
    }

  public void operate( FlowProcess flowProcess, FunctionCall functionCall )
    {
    // get the arguments TupleEntry
    TupleEntry arguments = functionCall.getArguments();

    // create a Tuple to hold our result values
    Tuple result = new Tuple();

    // sum the two arguments
    int sum = arguments.getInteger( 0 ) + arguments.getInteger( 1 );

    // add the sum value to the result Tuple
    result.add( sum );

    // return the result Tuple
    functionCall.getOutputCollector().add( result );
    }
  }</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The example above implements a <span class="classname">Function</span> that accepts two values in
the argument Tuple, adds them together, and returns the result in a new Tuple.</p>
</div>
<div class="paragraph">
<p>The first constructor above assumes a default field name for the field that this
<span class="classname">Function</span> returns. In practice, it&#8217;s good to give the user the
option of overriding the declared field names, allowing them to prevent possible
field name collisions that might cause the planner to fail.</p>
</div>
<div class="paragraph">
<p>This line is especially important:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java" data-lang="java">int sum = arguments.getInteger( 0 ) + arguments.getInteger( 1 );</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that ordinal numbers, not field names, are used here to get argument
values. If field names are used, the <span class="classname">AddValuesFunction</span> is coupled
to the incoming stream.</p>
</div>
<div class="exampleblock">
<div class="title">Example 3. AddValuesFunction and Context</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java" data-lang="java">public class EfficientAddValuesFunction
  extends BaseOperation&lt;Tuple&gt; implements Function&lt;Tuple&gt;
  {
  public EfficientAddValuesFunction()
    {
    // expects 2 arguments, fail otherwise
    super( 2, new Fields( "sum" ) );
    }

  public EfficientAddValuesFunction( Fields fieldDeclaration )
    {
    // expects 2 arguments, fail otherwise
    super( 2, fieldDeclaration );
    }

  @Override
  public void prepare( FlowProcess flowProcess, OperationCall&lt;Tuple&gt; call )
    {
    // create a reusable Tuple of size 1
    call.setContext( Tuple.size( 1 ) );
    }

  public void operate( FlowProcess flowProcess, FunctionCall&lt;Tuple&gt; call )
    {
    // get the arguments TupleEntry
    TupleEntry arguments = call.getArguments();

    // get our previously created Tuple
    Tuple result = call.getContext();

    // sum the two arguments
    int sum = arguments.getInteger( 0 ) + arguments.getInteger( 1 );

    // set the sum value on the result Tuple
    result.set( 0, sum );

    // return the result Tuple
    call.getOutputCollector().add( result );
    }

  @Override
  public void cleanup( FlowProcess flowProcess, OperationCall&lt;Tuple&gt; call )
    {
    call.setContext( null );
    }
  }</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>This example, a minor variation on the previous one, introduces the use of a
"context" object and <span class="methodname">prepare()</span> and <span class="methodname">cleanup()</span>
methods.</p>
</div>
<div class="paragraph">
<p>All Operations allow for a context object, simply a user-defined object that can
hold user state information between calls to the <span class="methodname">operate()</span> method.
This allows for a given instance of the Operation to be thread safe on a
platform that may use multiple threads of execution versus multiple processes.
It also allows deferring initialization of complex resources until the Operation
is engaged.</p>
</div>
<div class="paragraph">
<p>The <span class="methodname">prepare()</span> and <span class="methodname">cleanup()</span> methods are invoked once
per thread of execution. In a clustered-platform environment, the methods are
invoked only on the cluster side and never on the client.</p>
</div>
<div class="paragraph">
<p>In Example 3, a <span class="classname">Tuple</span> is used as the context; a more complex type
is not necessary. Also note that the Tuple is not storing state, but is reused
to reduce the number of new Object instances. In Cascading, it is perfectly safe
to output the same Tuple instance from <span class="methodname">operate()</span>. The method
<span class="code">functionCall.getOutputCollector().add( result )</span> does not return until
the resulting <span class="classname">Tuple</span> has been processed, copied, or persisted
downstream.</p>
</div>
</div>
<div class="sect2">
<h3 id="filters"><a class="anchor" href="ch13-using-operations.html#filters"></a>Filters</h3>
<div class="paragraph">
<p>A <span class="classname">Filter</span> expects a stream of individual argument Tuples and returns
a boolean value for each one, stating whether it should be discarded. Like a
<span class="classname">Function</span>, a <span class="classname">Filter</span> is used with an <span class="classname">Each</span>
pipe, which may follow any pipe type.</p>
</div>
<div class="paragraph">
<p>To create a custom <span class="classname">Filter</span>, subclass the class
<span class="code">cascading.operation.BaseOperation</span> and implement the interface
<span class="code">cascading.operation.Filter</span>. Because <span class="code">BaseOperation</span> has been
subclassed, the <span class="code">isRemove</span> method, as defined on the <span class="code">Filter</span>
interface, is the only method that must be implemented.</p>
</div>
<div class="exampleblock">
<div class="title">Example 4. Custom Filter</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java" data-lang="java">public class SomeFilter extends BaseOperation implements Filter
  {
  public boolean isRemove( FlowProcess flowProcess, FilterCall call )
    {
    // get the arguments TupleEntry
    TupleEntry arguments = call.getArguments();

    // initialize the return result
    boolean isRemove = false;

    // test the argument values and set isRemove accordingly

    return isRemove;
    }
  }</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Filters must accept one or more values in a Tuple as arguments. When coding a
Filter, declare the number of argument values that you want the Filter to
accept. If not specified, the default is to accept any number of values
(<span class="code">Operation.ANY</span>). Cascading verifies during planning that the number of
arguments selected matches the number of arguments expected.</p>
</div>
<div class="paragraph">
<p>The number of arguments declaration must be done on the constructor, either by
passing a default value to the super constructor or by accepting the value from
the user via a constructor implementation.</p>
</div>
<div class="exampleblock">
<div class="title">Example 5. StringLengthFilter</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java" data-lang="java">public class StringLengthFilter extends BaseOperation implements Filter
  {
  public StringLengthFilter()
    {
    // expects 2 arguments, fail otherwise
    super( 2 );
    }

  public boolean isRemove( FlowProcess flowProcess, FilterCall call )
    {
    // get the arguments TupleEntry
    TupleEntry arguments = call.getArguments();

    // filter out the current Tuple if the first argument length is greater
    // than the second argument integer value
    return arguments.getString( 0 ).length() &gt; arguments.getInteger( 1 );
    }
  }</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The example above implements a <span class="classname">Filter</span> that accepts two arguments
and filters out the current Tuple if the first argument, String length, is
greater than the integer value of the second argument.</p>
</div>
</div>
<div class="sect2">
<h3 id="aggregators"><a class="anchor" href="ch13-using-operations.html#aggregators"></a>Aggregators</h3>
<div class="paragraph">
<p>An <span class="classname">Aggregator</span> expects a stream of tuple groups (the output of a
<span class="classname">GroupBy</span> or <span class="classname">CoGroup</span> pipe), and returns zero or more
result tuples for every group.</p>
</div>
<div class="paragraph">
<p>An <span class="classname">Aggregator</span> may only be used with an <span class="classname">Every</span> pipe&#8201;&#8212;&#8201;an <span class="classname">Every</span> may follow a <span class="classname">GroupBy</span>, a <span class="classname">CoGroup</span>,
or another <span class="classname">Every</span> pipe, but not an <span class="classname">Each</span>.</p>
</div>
<div class="paragraph">
<p>To create a custom <span class="classname">Aggregator</span>, subclass the class
<span class="code">cascading.operation.BaseOperation</span> and implement the interface
<span class="code">cascading.operation.Aggregator</span>. Because <span class="code">BaseOperation</span> has been
subclassed, the <span class="code">start</span>, <span class="code">aggregate</span>, and <span class="code">complete</span> methods,
as defined on the <span class="code">Aggregator</span> interface, are the only methods that must
be implemented.</p>
</div>
<div class="exampleblock">
<div class="title">Example 6. Custom Aggregator</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java" data-lang="java">public class SomeAggregator extends BaseOperation&lt;SomeAggregator.Context&gt;
  implements Aggregator&lt;SomeAggregator.Context&gt;
  {
  public static class Context
    {
    Object value;
    }

  public void start( FlowProcess flowProcess,
                     AggregatorCall&lt;Context&gt; aggregatorCall )
    {
    // get the group values for the current grouping
    TupleEntry group = aggregatorCall.getGroup();

    // create a new custom context object
    Context context = new Context();

    // optionally, populate the context object

    // set the context object
    aggregatorCall.setContext( context );
    }

  public void aggregate( FlowProcess flowProcess,
                         AggregatorCall&lt;Context&gt; aggregatorCall )
    {
    // get the current argument values
    TupleEntry arguments = aggregatorCall.getArguments();

    // get the context for this grouping
    Context context = aggregatorCall.getContext();

    // update the context object
    }

  public void complete( FlowProcess flowProcess,
                        AggregatorCall&lt;Context&gt; aggregatorCall )
    {
    Context context = aggregatorCall.getContext();

    // create a Tuple to hold our result values
    Tuple result = new Tuple();

    // insert some values into the result Tuple based on the context

    // return the result Tuple
    aggregatorCall.getOutputCollector().add( result );
    }
  }</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Whenever possible, Aggregators should declare both the number of argument values
they expect and the field names of the Tuple they return. However, these
declarations are optional, as explained below.</p>
</div>
<div class="paragraph">
<p>For input, Aggregators must accept one or more values in a Tuple as arguments.
If not specified, the default is to accept any number of values
(<span class="code">Operation.ANY</span>). Cascading verifies during planning that the number of
arguments selected is the same as the number of arguments expected.</p>
</div>
<div class="paragraph">
<p>For output, it is best practice to code an Aggregator so that it declares the
fields that are returned. If not specified, the default is
<span class="code">Fields.UNKNOWN</span>, meaning that an unknown number of fields are returned in
each Tuple.</p>
</div>
<div class="paragraph">
<p>Both declarations&#8201;&#8212;&#8201;the number of input arguments and declared result fields&#8201;&#8212;&#8201;must be done on the constructor, either by passing default values to the super
constructor or by accepting the values from the user via a constructor
implementation.</p>
</div>
<div class="exampleblock">
<div class="title">Example 7. AddTuplesAggregator</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java" data-lang="java">public class AddTuplesAggregator
  extends BaseOperation&lt;AddTuplesAggregator.Context&gt;
  implements Aggregator&lt;AddTuplesAggregator.Context&gt;
  {
  public static class Context
    {
    long value = 0;
    }

  public AddTuplesAggregator()
    {
    // expects 1 argument, fail otherwise
    super( 1, new Fields( "sum" ) );
    }

  public AddTuplesAggregator( Fields fieldDeclaration )
    {
    // expects 1 argument, fail otherwise
    super( 1, fieldDeclaration );
    }

  public void start( FlowProcess flowProcess,
                     AggregatorCall&lt;Context&gt; aggregatorCall )
    {
    // set the context object, starting at zero
    aggregatorCall.setContext( new Context() );
    }

  public void aggregate( FlowProcess flowProcess,
                         AggregatorCall&lt;Context&gt; aggregatorCall )
    {
    TupleEntry arguments = aggregatorCall.getArguments();
    Context context = aggregatorCall.getContext();

    // add the current argument value to the current sum
    context.value += arguments.getInteger( 0 );
    }

  public void complete( FlowProcess flowProcess,
                        AggregatorCall&lt;Context&gt; aggregatorCall )
    {
    Context context = aggregatorCall.getContext();

    // create a Tuple to hold our result values
    Tuple result = new Tuple();

    // set the sum
    result.add( context.value );

    // return the result Tuple
    aggregatorCall.getOutputCollector().add( result );
    }
  }</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The example above implements an <span class="classname">Aggregator</span> that accepts a value in
the argument Tuple, adds all the argument tuples in the current grouping, and
returns the result as a new Tuple.</p>
</div>
<div class="paragraph">
<p>The first constructor above assumes a default field name that this
<span class="classname">Aggregator</span> returns. In practice, it&#8217;s good to give the user the
option of overriding the declared field names, allowing them to prevent possible
field name collisions that might cause the planner to fail.</p>
</div>
<div class="paragraph">
<p>There are several constraints on the use of Aggregators that may not be
self-evident. These constraints are detailed in the Javadoc.</p>
</div>
</div>
<div class="sect2">
<h3 id="buffers"><a class="anchor" href="ch13-using-operations.html#buffers"></a>Buffers</h3>
<div class="paragraph">
<p>A <span class="classname">Buffer</span> expects a set of argument tuples in the same grouping, and
may return zero or more result tuples.</p>
</div>
<div class="paragraph">
<p>A <span class="classname">Buffer</span> is very similar to an <span class="classname">Aggregator</span>, except that
it receives the current grouping Tuple, and an <span class="classname">Iterator</span> of all the
arguments it expects, for every value Tuple in the current grouping&#8201;&#8212;&#8201;all on
the same method call.</p>
</div>
<div class="paragraph">
<p>[classname]+Buffer+s are similar to the typical <em>Reducer</em> interface in
MapReduce, and is best used for operations that need visibility to the previous
and next elements in the stream for the current group&#8201;&#8212;&#8201;such as smoothing a
series of time stamps where there are missing values or creating a running
average.</p>
</div>
<div class="paragraph">
<p>A <span class="classname">Buffer</span> may only be used with an <span class="classname">Every</span> pipe, and it
may only follow a <span class="classname">GroupBy</span> or <span class="classname">CoGroup</span> pipe type.</p>
</div>
<div class="paragraph">
<p>To create a custom <span class="classname">Buffer</span>, subclass the class
<span class="code">cascading.operation.BaseOperation</span> and implement the interface
<span class="code">cascading.operation.Buffer</span>. Because <span class="code">BaseOperation</span> has been
subclassed, the <span class="code">operate</span> method, as defined on the <span class="code">Buffer</span>
interface, is the only method that must be implemented.</p>
</div>
<div class="exampleblock">
<div class="title">Example 8. Custom Buffer</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java" data-lang="java">public class SomeBuffer extends BaseOperation implements Buffer
  {
  public void operate( FlowProcess flowProcess, BufferCall bufferCall )
    {
    // get the group values for the current grouping
    TupleEntry group = bufferCall.getGroup();

    // get all the current argument values for this grouping
    Iterator&lt;TupleEntry&gt; arguments = bufferCall.getArgumentsIterator();

    // create a Tuple to hold our result values
    Tuple result = new Tuple();

    while( arguments.hasNext() )
      {
      TupleEntry argument = arguments.next();

      // insert some values into the result Tuple based on the arguemnts
      }

    // return the result Tuple
    bufferCall.getOutputCollector().add( result );
    }
  }</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Buffers should declare both the number of argument values they expect and the
field names of the Tuple they return.</p>
</div>
<div class="paragraph">
<p>For input, Buffers must accept one or more values in a Tuple as arguments. If
not specified, the default is to accept any number of values
(<span class="code">Operation.ANY</span>). During the planning phase, Cascading verifies that the
number of arguments selected is the same as the number of arguments expected.</p>
</div>
<div class="paragraph">
<p>For output, it&#8217;s good practice for Buffers to declare the field names they
return. If not specified, the default is <span class="code">Fields.UNKNOWN</span>, meaning that an
unknown number of fields are returned in each Tuple.</p>
</div>
<div class="paragraph">
<p>Both declarations&#8201;&#8212;&#8201;the number of input arguments and declared result fields&#8201;&#8212;&#8201;must be done on the constructor, either by passing default values to the super
constructor or by accepting the values from the user via a constructor
implementation.</p>
</div>
<div class="exampleblock">
<div class="title">Example 9. Average Buffer</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java" data-lang="java">public class AverageBuffer extends BaseOperation implements Buffer
  {

  public AverageBuffer()
    {
    super( 1, new Fields( "average" ) );
    }

  public AverageBuffer( Fields fieldDeclaration )
    {
    super( 1, fieldDeclaration );
    }

  public void operate( FlowProcess flowProcess, BufferCall bufferCall )
    {
    // init the count and sum
    long count = 0;
    long sum = 0;

    // get all the current argument values for this grouping
    Iterator&lt;TupleEntry&gt; arguments = bufferCall.getArgumentsIterator();

    while( arguments.hasNext() )
      {
      count++;
      sum += arguments.next().getInteger( 0 );
      }

    // create a Tuple to hold our result values
    Tuple result = new Tuple( sum / count );

    // return the result Tuple
    bufferCall.getOutputCollector().add( result );
    }
  }</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The example above implements a buffer that accepts a value in the argument
Tuple, adds all these argument tuples in the current grouping, and returns the
result divided by the number of argument tuples counted in a new Tuple.</p>
</div>
<div class="paragraph">
<p>The first constructor above assumes a default field name for the field that this
<span class="classname">Buffer</span> returns. In practice, it&#8217;s good to give the user the option
of overriding the declared field names, allowing them to prevent possible field
name collisions that might cause the planner to fail.</p>
</div>
<div class="paragraph">
<p>Note that this example is somewhat artificial. In actual practice, an
<span class="classname">Aggregator</span> would be a better way to compute averages for an entire
dataset. A <span class="classname">Buffer</span> is better suited for calculating running averages
across very large spans, for example.</p>
</div>
<div class="paragraph">
<p>There are several constraints on the use of Buffers that may not be
self-evident. These constraints are detailed in the Javadoc.</p>
</div>
<div class="paragraph">
<p>As with the <span class="classname">Function</span> example above, a <span class="classname">Buffer</span> may
define a custom context object and implement the <span class="methodname">prepare()</span> and
<span class="methodname">cleanup()</span> methods to maintain shared state, or re-use outgoing
<span class="classname">Tuple</span> instances for efficiency.</p>
</div>
</div>
<div class="sect2">
<h3 id="_operation_and_baseoperation"><a class="anchor" href="ch13-using-operations.html#_operation_and_baseoperation"></a>Operation and BaseOperation</h3>
<div class="paragraph">
<p>In all of the above sections, the <span class="classname">cascading.operation.BaseOperation</span>
class was subclassed. This class is an implementation of the
<span class="classname">cascading.operation.Operation</span> interface, and provides a few default
method implementations. It is not strictly required to extend
<span class="classname">BaseOperation</span> when implementing this interface, but it is very
convenient to do so.</p>
</div>
<div class="paragraph">
<p>When developing custom operations, the developer may need to initialize and
destroy a resource. For example, when doing pattern matching, you might need to
initialize a <span class="classname">java.util.regex.Matcher</span> and use it in a thread-safe
way. Or you might need to open, and eventually close, a remote connection. But
for performance reasons, the operation should not create or destroy the
connection for each Tuple or every Tuple group that passes through. Nor should
user code store any state values in a Class instance or static field.</p>
</div>
<div class="paragraph">
<p>For this reason, the interface <span class="interfacename">Operation</span> declares two methods:
<span class="methodname">prepare()</span> and <span class="methodname">cleanup()</span>.</p>
</div>
<div class="paragraph">
<p>In the case of a clustered platform, the <span class="methodname">prepare()</span> and
<span class="methodname">cleanup()</span> methods are called once per cluster-side unit of
processing (typically a JVM).</p>
</div>
<div class="paragraph">
<p>The <span class="methodname">prepare()</span> method is called before any argument Tuple is
passed. The <span class="methodname">cleanup()</span> method is called after all Tuple arguments
are processed in the operation.</p>
</div>
<div class="paragraph">
<p>Within each of these methods, the developer can initialize or destroy a
"context" object that can hold an open-socket connection or <span class="classname">Matcher</span>
instance. This context is user defined, and is the same mechanism used by the
<span class="classname">Aggregator</span> operation&#8201;&#8212;&#8201;except that the <span class="classname">Aggregator</span> is
also given the opportunity to initialize and destroy its context, via the
<span class="classname">start()</span> and <span class="classname">complete()</span> methods.</p>
</div>
<div class="paragraph">
<p>Note that if a "context" object is used, its type should be declared in the
subclass class declaration using the Java Generics notation.</p>
</div>
</div>
</div>
</div>
</div>
  <hr>
<div class="footer">
  <div class="footer-text">
      <a href="index.html">Back to Top</a> - Last updated 2016-01-12 05:12:33 UTC
      <p>© 2007-2015 Concurrent, Inc. All rights reserved.</p>
  </div>
</div>
</body>
</html><!--
     FILE ARCHIVED ON 06:03:15 Dec 04, 2023 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 15:22:54 Aug 15, 2025.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
<!--
playback timings (ms):
  captures_list: 0.8
  exclusion.robots: 0.037
  exclusion.robots.policy: 0.022
  esindex: 0.013
  cdx.remote: 40.988
  LoadShardBlock: 213.268 (3)
  PetaboxLoader3.datanode: 239.483 (4)
  load_resource: 528.033
  PetaboxLoader3.resolve: 361.057
-->